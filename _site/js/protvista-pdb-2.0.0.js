var ProtvistaPdb=function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=15)}([function(t,e){t.exports=d3},function(t,e,r){"use strict";r.r(e),r.d(e,"DefaultTemplateProcessor",(function(){return L})),r.d(e,"defaultTemplateProcessor",(function(){return O})),r.d(e,"directive",(function(){return n})),r.d(e,"isDirective",(function(){return s})),r.d(e,"removeNodes",(function(){return l})),r.d(e,"reparentNodes",(function(){return o})),r.d(e,"noChange",(function(){return c})),r.d(e,"AttributeCommitter",(function(){return x})),r.d(e,"AttributePart",(function(){return w})),r.d(e,"BooleanAttributePart",(function(){return S})),r.d(e,"EventPart",(function(){return j})),r.d(e,"isPrimitive",(function(){return _})),r.d(e,"NodePart",(function(){return k})),r.d(e,"PropertyCommitter",(function(){return E})),r.d(e,"PropertyPart",(function(){return A})),r.d(e,"parts",(function(){return I})),r.d(e,"render",(function(){return M})),r.d(e,"templateCaches",(function(){return P})),r.d(e,"templateFactory",(function(){return D})),r.d(e,"TemplateInstance",(function(){return b})),r.d(e,"SVGTemplateResult",(function(){return m})),r.d(e,"TemplateResult",(function(){return y})),r.d(e,"createMarker",(function(){return f})),r.d(e,"isTemplatePartActive",(function(){return g})),r.d(e,"Template",(function(){return d})),r.d(e,"html",(function(){return q})),r.d(e,"svg",(function(){return F}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const i=new WeakMap,n=t=>(...e)=>{const r=t(...e);return i.set(r,!0),r},s=t=>"function"==typeof t&&i.has(t)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,a=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,o=(t,e,r=null,i=null)=>{let n=e;for(;n!==r;){const e=n.nextSibling;t.insertBefore(n,i),n=e}},l=(t,e,r=null)=>{let i=e;for(;i!==r;){const e=i.nextSibling;t.removeChild(i),i=e}},c={},h=`{{lit-${String(Math.random()).slice(2)}}}`,p=`\x3c!--${h}--\x3e`,u=new RegExp(`${h}|${p}`);class d{constructor(t,e){this.parts=[],this.element=e;let r=-1,i=0;const n=[],s=e=>{const a=e.content,o=document.createTreeWalker(a,133,null,!1);let l,c;for(;o.nextNode();){r++,l=c;const e=c=o.currentNode;if(1===e.nodeType){if(e.hasAttributes()){const n=e.attributes;let s=0;for(let t=0;t<n.length;t++)n[t].value.indexOf(h)>=0&&s++;for(;s-- >0;){const n=t.strings[i],s=v.exec(n)[2],a=s.toLowerCase()+"$lit$",o=e.getAttribute(a).split(u);this.parts.push({type:"attribute",index:r,name:s,strings:o}),e.removeAttribute(a),i+=o.length-1}}"TEMPLATE"===e.tagName&&s(e)}else if(3===e.nodeType){const t=e.nodeValue;if(t.indexOf(h)<0)continue;const s=e.parentNode,a=t.split(u),o=a.length-1;i+=o;for(let t=0;t<o;t++)s.insertBefore(""===a[t]?f():document.createTextNode(a[t]),e),this.parts.push({type:"node",index:r++});s.insertBefore(""===a[o]?f():document.createTextNode(a[o]),e),n.push(e)}else if(8===e.nodeType)if(e.nodeValue===h){const t=e.parentNode,s=e.previousSibling;null===s||s!==l||s.nodeType!==Node.TEXT_NODE?t.insertBefore(f(),e):r--,this.parts.push({type:"node",index:r++}),n.push(e),null===e.nextSibling?t.insertBefore(f(),e):r--,c=l,i++}else{let t=-1;for(;-1!==(t=e.nodeValue.indexOf(h,t+1));)this.parts.push({type:"node",index:-1})}}};s(e);for(const t of n)t.parentNode.removeChild(t)}}const g=t=>-1!==t.index,f=()=>document.createComment(""),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class b{constructor(t,e,r){this._parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this._parts)void 0!==r&&r.setValue(t[e]),e++;for(const t of this._parts)void 0!==t&&t.commit()}_clone(){const t=a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts;let r=0,i=0;const n=t=>{const s=document.createTreeWalker(t,133,null,!1);let a=s.nextNode();for(;r<e.length&&null!==a;){const t=e[r];if(g(t))if(i===t.index){if("node"===t.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(a),this._parts.push(t)}else this._parts.push(...this.processor.handleAttributeExpressions(a,t.name,t.strings,this.options));r++}else i++,"TEMPLATE"===a.nodeName&&n(a.content),a=s.nextNode();else this._parts.push(void 0),r++}};return n(t),a&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class y{constructor(t,e,r,i){this.strings=t,this.values=e,this.type=r,this.processor=i}getHTML(){const t=this.strings.length-1;let e="";for(let r=0;r<t;r++){const t=this.strings[r];let i=!1;e+=t.replace(v,(t,e,r,n)=>(i=!0,e+r+"$lit$"+n+h)),i||(e+=p)}return e+this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}class m extends y{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,r=e.firstChild;return e.removeChild(r),o(e,r.firstChild),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const _=t=>null===t||!("object"==typeof t||"function"==typeof t);class x{constructor(t,e,r){this.dirty=!0,this.element=t,this.name=e,this.strings=r,this.parts=[];for(let t=0;t<r.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new w(this)}_getValue(){const t=this.strings,e=t.length-1;let r="";for(let i=0;i<e;i++){r+=t[i];const e=this.parts[i];if(void 0!==e){const t=e.value;if(null!=t&&(Array.isArray(t)||"string"!=typeof t&&t[Symbol.iterator]))for(const e of t)r+="string"==typeof e?e:String(e);else r+="string"==typeof t?t:String(t)}}return r+=t[e],r}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class w{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===c||_(t)&&t===this.value||(this.value=t,s(t)||(this.committer.dirty=!0))}commit(){for(;s(this.value);){const t=this.value;this.value=c,t(this)}this.value!==c&&this.committer.commit()}}class k{constructor(t){this.value=void 0,this._pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(f()),this.endNode=t.appendChild(f())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t._insert(this.startNode=f()),t._insert(this.endNode=f())}insertAfterPart(t){t._insert(this.startNode=f()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this._pendingValue=t}commit(){for(;s(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this)}const t=this._pendingValue;t!==c&&(_(t)?t!==this.value&&this._commitText(t):t instanceof y?this._commitTemplateResult(t):t instanceof Node?this._commitNode(t):Array.isArray(t)||t[Symbol.iterator]?this._commitIterable(t):this._commitText(t))}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}_commitNode(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t)}_commitText(t){const e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._commitNode(document.createTextNode("string"==typeof t?t:String(t))),this.value=t}_commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value&&this.value.template===e)this.value.update(t.values);else{const r=new b(e,t.processor,this.options),i=r._clone();r.update(t.values),this._commitNode(i),this.value=r}}_commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,i=0;for(const n of t)r=e[i],void 0===r&&(r=new k(this.options),e.push(r),0===i?r.appendIntoPart(this):r.insertAfterPart(e[i-1])),r.setValue(n),r.commit(),i++;i<e.length&&(e.length=i,this.clear(r&&r.endNode))}clear(t=this.startNode){l(this.startNode.parentNode,t.nextSibling,this.endNode)}}class S{constructor(t,e,r){if(this.value=void 0,this._pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=r}setValue(t){this._pendingValue=t}commit(){for(;s(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this)}if(this._pendingValue===c)return;const t=!!this._pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=t,this._pendingValue=c}}class E extends x{constructor(t,e,r){super(t,e,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new A(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class A extends w{}let C=!1;try{const t={get capture(){return C=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}class j{constructor(t,e,r){this.value=void 0,this._pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=r,this._boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this._pendingValue=t}commit(){for(;s(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this)}if(this._pendingValue===c)return;const t=this._pendingValue,e=this.value,r=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||r);r&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),i&&(this._options=T(t),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=t,this._pendingValue=c}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const T=t=>t&&(C?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;class L{handleAttributeExpressions(t,e,r,i){const n=e[0];if("."===n){return new E(t,e.slice(1),r).parts}if("@"===n)return[new j(t,e.slice(1),i.eventContext)];if("?"===n)return[new S(t,e.slice(1),r)];return new x(t,e,r).parts}handleTextExpression(t){return new k(t)}}const O=new L;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function D(t){let e=P.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},P.set(t.type,e));let r=e.stringsArray.get(t.strings);if(void 0!==r)return r;const i=t.strings.join(h);return r=e.keyString.get(i),void 0===r&&(r=new d(t,t.getTemplateElement()),e.keyString.set(i,r)),e.stringsArray.set(t.strings,r),r}const P=new Map,I=new WeakMap,M=(t,e,r)=>{let i=I.get(e);void 0===i&&(l(e,e.firstChild),I.set(e,i=new k(Object.assign({templateFactory:D},r))),i.appendInto(e)),i.setValue(t),i.commit()},q=(t,...e)=>new y(t,e,"html",O),F=(t,...e)=>new m(t,e,"svg",O);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */},function(t,e,r){"use strict";var i=r(5),n="object"==typeof self&&self&&self.Object===Object&&self,s=i.a||n||Function("return this")();e.a=s},function(t,e,r){"use strict";(function(t){var i=r(5),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=n&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===n&&i.a.process,o=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=o}).call(this,r(8)(t))},function(t,e,r){"use strict";(function(t){var i=r(2),n=r(12),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=s&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===s?i.a.Buffer:void 0,l=(o?o.isBuffer:void 0)||n.a;e.a=l}).call(this,r(8)(t))},function(t,e,r){"use strict";(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.a=r}).call(this,r(10))},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var n=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),s=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[r].concat(s).concat([n]).join("\n")}var a;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var s=this[n][0];null!=s&&(i[s]=!0)}for(n=0;n<t.length;n++){var a=t[n];null!=a[0]&&i[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){var i,n,s={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=i.apply(this,arguments)),n}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},l=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var i=o.call(this,t,r);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),c=null,h=0,p=[],u=r(17);function d(t,e){for(var r=0;r<t.length;r++){var i=t[r],n=s[i.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](i.parts[a]);for(;a<i.parts.length;a++)n.parts.push(m(i.parts[a],e))}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(m(i.parts[a],e));s[i.id]={id:i.id,refs:1,parts:o}}}}function g(t,e){for(var r=[],i={},n=0;n<t.length;n++){var s=t[n],a=e.base?s[0]+e.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};i[a]?i[a].parts.push(o):r.push(i[a]={id:a,parts:[o]})}return r}function f(t,e){var r=l(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=p[p.length-1];if("top"===t.insertAt)i?i.nextSibling?r.insertBefore(e,i.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),p.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=l(t.insertAt.before,r);r.insertBefore(e,n)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function b(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return r.nc}();i&&(t.attrs.nonce=i)}return y(e,t.attrs),f(t,e),e}function y(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function m(t,e){var r,i,n,s;if(e.transform&&t.css){if(!(s="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=s}if(e.singleton){var a=h++;r=c||(c=b(e)),i=w.bind(null,r,a,!1),n=w.bind(null,r,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),f(t,e),e}(e),i=S.bind(null,r,e),n=function(){v(r),r.href&&URL.revokeObjectURL(r.href)}):(r=b(e),i=k.bind(null,r),n=function(){v(r)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=g(t,e);return d(r,e),function(t){for(var i=[],n=0;n<r.length;n++){var a=r[n];(o=s[a.id]).refs--,i.push(o)}t&&d(g(t,e),e);for(n=0;n<i.length;n++){var o;if(0===(o=i[n]).refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete s[o.id]}}}};var _,x=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function w(t,e,r,i){var n=r?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,n);else{var s=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function k(t,e){var r=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function S(t,e,r){var i=r.css,n=r.sourceMap,s=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||s)&&(i=u(i)),n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,r){var i=r(16);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(7)(i,n);i.locals&&(t.exports=i.locals)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=ResizeObserver},function(t,e,r){"use strict";e.a=function(){return!1}},function(t,e,r){"use strict";(function(t){var i=r(2),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=n&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===n?i.a.Buffer:void 0,o=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var r=t.length,i=o?o(r):new t.constructor(r);return t.copy(i),i}}).call(this,r(8)(t))},,function(t,e,r){t.exports=r(30)},function(t,e,r){(t.exports=r(6)(!1)).push([t.i,'protvista-checkbox {\n  font-size: 12px;\n}\n\nprotvista-checkbox[disabled] {\n  opacity: 0.50;\n}\n\n.protvista_checkbox {\n  position: relative;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n  line-height: 24px;\n  outline: none;\n  font-size: 1em;\n}\n\n.protvista_checkbox_input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n  margin: 0;\n}\n\n.protvista_checkbox_label {\n  display: flex;\n  flex-direction: column;\n  text-indent: 1em;\n  margin-left: 16px;\n}\n\n.protvista_checkbox_input + .protvista_checkbox_label::before {\n  content: "";\n  width:  24px;\n  position: absolute;\n  left: 0;\n  top:  0;\n  bottom: 0;\n  border-radius: 4px;\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #bdc3c7;\n}\n',""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,i=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var n,s=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(n=0===s.indexOf("//")?s:0===s.indexOf("/")?r+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")}))}},function(t,e,r){"use strict";(function(e){var i=r(19);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function n(t,e){if(t===e)return 0;for(var r=t.length,i=e.length,n=0,s=Math.min(r,i);n<s;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0}function s(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=r(20),o=Object.prototype.hasOwnProperty,l=Array.prototype.slice,c="foo"===function(){}.name;function h(t){return Object.prototype.toString.call(t)}function p(t){return!s(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var u=t.exports=y,d=/\s*function\s+([^\(\s]*)\s*/;function g(t){if(a.isFunction(t)){if(c)return t.name;var e=t.toString().match(d);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(c||!a.isFunction(t))return a.inspect(t);var e=g(t);return"[Function"+(e?": "+e:"")+"]"}function b(t,e,r,i,n){throw new u.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:n})}function y(t,e){t||b(t,!0,e,"==",u.ok)}function m(t,e,r,i){if(t===e)return!0;if(s(t)&&s(e))return 0===n(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(p(t)&&p(e)&&h(t)===h(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(s(t)!==s(e))return!1;var o=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==o&&o===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),function(t,e,r,i){if(null==t||null==e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=_(t),s=_(e);if(n&&!s||!n&&s)return!1;if(n)return t=l.call(t),e=l.call(e),m(t,e,r);var o,c,h=k(t),p=k(e);if(h.length!==p.length)return!1;for(h.sort(),p.sort(),c=h.length-1;c>=0;c--)if(h[c]!==p[c])return!1;for(c=h.length-1;c>=0;c--)if(o=h[c],!m(t[o],e[o],r,i))return!1;return!0}(t,e,r,i))}return r?t===e:t==e}function _(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,r,i){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),n=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!n&&b(n,r,"Missing expected exception"+i);var s="string"==typeof i,o=!t&&n&&!r;if((!t&&a.isError(n)&&s&&x(n,r)||o)&&b(n,r,"Got unwanted exception"+i),t&&n&&r&&!x(n,r)||!t&&n)throw n}u.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return f(v(t.actual),128)+" "+t.operator+" "+f(v(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,n=g(e),s=i.indexOf("\n"+n);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}},a.inherits(u.AssertionError,Error),u.fail=b,u.ok=y,u.equal=function(t,e,r){t!=e&&b(t,e,r,"==",u.equal)},u.notEqual=function(t,e,r){t==e&&b(t,e,r,"!=",u.notEqual)},u.deepEqual=function(t,e,r){m(t,e,!1)||b(t,e,r,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,r){m(t,e,!0)||b(t,e,r,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,r){m(t,e,!1)&&b(t,e,r,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,r,i){m(e,r,!0)&&b(e,r,i,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,r){t!==e&&b(t,e,r,"===",u.strictEqual)},u.notStrictEqual=function(t,e,r){t===e&&b(t,e,r,"!==",u.notStrictEqual)},u.throws=function(t,e,r){w(!0,t,e,r)},u.doesNotThrow=function(t,e,r){w(!1,t,e,r)},u.ifError=function(t){if(t)throw t},u.strict=i((function t(e,r){e||b(e,!0,r,"==",t)}),u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var k=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e}}).call(this,r(10))},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,o,l=a(t),c=1;c<arguments.length;c++){for(var h in r=Object(arguments[c]))n.call(r,h)&&(l[h]=r[h]);if(i){o=i(r);for(var p=0;p<o.length;p++)s.call(r,o[p])&&(l[o[p]]=r[o[p]])}}return l}},function(t,e,r){(function(t){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++)r[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return r},n=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(o(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,s=i.length,a=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=s)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}})),l=i[r];r<s;l=i[++r])f(l)||!_(l)?a+=" "+l:a+=" "+o(l);return a},e.deprecate=function(r,i){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}};var s,a={};function o(t,r){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(r)?i.showHidden=r:r&&e._extend(i,r),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),h(i,t,i.depth)}function l(t,e){var r=o.styles[e];return r?"["+o.colors[r][0]+"m"+t+"["+o.colors[r][1]+"m":t}function c(t,e){return t}function h(t,r,i){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,t);return b(n)||(n=h(t,n,i)),n}var s=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(v(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(f(e))return t.stylize("null","null")}(t,r);if(s)return s;var a=Object.keys(r),o=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),w(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(k(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(m(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return t.stylize(Date.prototype.toString.call(r),"date");if(w(r))return p(r)}var c,_="",S=!1,E=["{","}"];(d(r)&&(S=!0,E=["[","]"]),k(r))&&(_=" [Function"+(r.name?": "+r.name:"")+"]");return m(r)&&(_=" "+RegExp.prototype.toString.call(r)),x(r)&&(_=" "+Date.prototype.toUTCString.call(r)),w(r)&&(_=" "+p(r)),0!==a.length||S&&0!=r.length?i<0?m(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=S?function(t,e,r,i,n){for(var s=[],a=0,o=e.length;a<o;++a)j(e,String(a))?s.push(u(t,e,r,i,String(a),!0)):s.push("");return n.forEach((function(n){n.match(/^\d+$/)||s.push(u(t,e,r,i,n,!0))})),s}(t,r,i,o,a):a.map((function(e){return u(t,r,i,o,e,S)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,_,E)):E[0]+_+E[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,r,i,n,s){var a,o,l;if((l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),j(i,n)||(a="["+n+"]"),o||(t.seen.indexOf(l.value)<0?(o=f(r)?h(t,l.value,null):h(t,l.value,r-1)).indexOf("\n")>-1&&(o=s?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),y(a)){if(s&&n.match(/^\d+$/))return o;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+o}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function f(t){return null===t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function y(t){return void 0===t}function m(t){return _(t)&&"[object RegExp]"===S(t)}function _(t){return"object"==typeof t&&null!==t}function x(t){return _(t)&&"[object Date]"===S(t)}function w(t){return _(t)&&("[object Error]"===S(t)||t instanceof Error)}function k(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(y(s)&&(s=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(s)){var i=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,i,t)}}else a[r]=function(){};return a[r]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=g,e.isNull=f,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=m,e.isObject=_,e.isDate=x,e.isError=w,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(22);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=r(23),e._extend=function(t,e){if(!e||!_(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,i=new Promise((function(t,i){e=t,r=i})),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push((function(t,i){t?r(t):e(i)}));try{t.apply(this,n)}catch(t){r(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=T,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var s=this,a=function(){return n.apply(s,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(L,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,i(e)),r}}).call(this,r(21))},function(t,e){var r,i,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],h=!1,p=-1;function u(){h&&l&&(h=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!h){var t=o(u);h=!0;for(var e=c.length;e;){for(l=c,c=[];++p<e;)l&&l[p].run();p=-1,e=c.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function f(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new g(t,e)),1!==c.length||h||o(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){var i=r(25);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(7)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,r){(t.exports=r(6)(!1)).push([t.i,"protvista-variation {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\nprotvista-variation svg {\r\n  background-color: #fff;\r\n}\r\n\r\nprotvista-variation circle {\r\n  opacity: 0.6;\r\n}\r\nprotvista-variation circle:hover {\r\n  opacity: 0.9;\r\n}\r\nprotvista-variation .tick line,\r\nprotvista-variation .axis path {\r\n  opacity: 0.1;\r\n}\r\n\r\nprotvista-variation .protvista-highlight {\r\n  fill: #ffe999;\r\n}\r\n\r\nprotvista-variation .variation-y-right line,\r\nprotvista-variation .axis path {\r\n  fill: none;\r\n  stroke: none;\r\n}\r\n",""])},function(t,e,r){var i=r(27);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(7)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,r){e=t.exports=r(6)(!1);var i=r(28)(r(29));e.push([t.i,'.protvista-pdb {\r\n    font-family: Helvetica,Arial,FreeSans,"Liberation Sans",sans-serif !important;\r\n    position: relative;\r\n    /* width: 100%; */\r\n    border: 1px solid lightgray;\r\n    margin-bottom: 20px;\r\n    padding: 20px 10px;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\n\r\n.protvistaRow {\r\n    display: table;\r\n    width: 100%;\r\n    clear: both;\r\n}\r\n\r\n.protvistaCol1 {\r\n    display: table-cell;\r\n    vertical-align: middle;\r\n    width: 15%;\r\n    font-size:90%;\r\n}\r\n\r\n.protvistaCol2 {\r\n    display: table-cell;\r\n    width: 85%;\r\n    overflow: hidden;\r\n    padding-left: 10px;\r\n}\r\n\r\n@media (max-width: 1800px) {\r\n    .protvistaCol1 {\r\n        width: 20%;\r\n        font-size:90%;\r\n    }\r\n    .protvistaCol2 {\r\n        width: 80%;\r\n    }\r\n}\r\n\r\n@media (max-width: 1400px) {\r\n    .protvistaCol1 {\r\n        width: 22%;\r\n        font-size:90%;\r\n    }\r\n    .protvistaCol2 {\r\n        width: 78%;\r\n    }\r\n}\r\n\r\n@media (max-width: 1100px) {\r\n    .protvistaCol1 {\r\n        width: 25%;\r\n        font-size:75%;\r\n    }\r\n    .protvistaCol2 {\r\n        width: 75%;\r\n    }\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n    .protvistaCol1 {\r\n        width: 27%;\r\n        font-size:70%;\r\n    }\r\n    .protvistaCol2 {\r\n        width: 73%;\r\n    }\r\n}\r\n\r\n@media (max-width: 767px) {\r\n    .protvistaCol1 {\r\n        width: 30%;\r\n        font-size:70%;\r\n    }\r\n    .protvistaCol2 {\r\n        width: 70%;\r\n    }\r\n}\r\n\r\n.category-label {\r\n    border-top: 1px solid #fff;\r\n    border-bottom: 1px solid #fff;\r\n    background-color: #b2f5ff;\r\n    cursor: pointer;\r\n    padding: .8em 1.3em .8em .8em;\r\n    position: relative;\r\n}\r\n\r\n.category-label:hover {\r\n    background-color: #80EEFF;\r\n}\r\n\r\n.category-label::before {\r\n    content: \' \';\r\n    display: inline-block;\r\n    width: 0;\r\n    height: 0;\r\n    border-top: 5px solid transparent;\r\n    border-bottom: 5px solid transparent;\r\n    border-left: 5px solid #333;\r\n    margin-right: 5px;\r\n    -webkit-transition: all .1s;\r\n    /* Safari */\r\n    transition: all .1s;\r\n}\r\n\r\n.protvistaRow.expanded > .category-label {\r\n    background-color: #80EEFF;\r\n}\r\n\r\n.protvistaRow.expanded > .category-label::before {\r\n    content: \' \';\r\n    display: inline-block;\r\n    width: 0;\r\n    height: 0;\r\n    border-left: 5px solid transparent;\r\n    border-right: 5px solid transparent;\r\n    border-top: 5px solid #333;\r\n    margin-right: 5px;\r\n}\r\n\r\n.track-label {\r\n    background-color: #d9faff;\r\n    padding: 0.5em 1.2em 0.5em 1.8em;\r\n    cursor:pointer;\r\n    position: relative;\r\n}\r\n\r\n.category-label.pdbIconsLabel, .track-label.pdbIconsLabel {\r\n    border-left: 1px solid #b2f5ff;\r\n    border-right: 1px solid #b2f5ff;\r\n    background-color: #fff;\r\n}\r\n\r\n.aggregate-track-content, .track-content-single {\r\n    opacity: 1;\r\n    -webkit-transition: opacity .1s;\r\n    /* Safari */\r\n    transition: opacity .1s;\r\n    border-bottom: 1px solid #b2f5ff;\r\n}\r\n\r\n.aggregate-track-content{\r\n    padding-bottom: 5px;\r\n}\r\n\r\n.track-label, .track-content {\r\n    border-bottom: 1px solid #b2f5ff;\r\n}\r\n\r\n.top-border {\r\n    border-top: 1px solid #b2f5ff;\r\n}\r\n\r\n.is-hidden{\r\n    display: none!important;\r\n}\r\n\r\n.pdbIcon {\r\n    display: inline-block;\r\n    padding: 5px 4px;\r\n}\r\n\r\n.pdbIcon i {\r\n    color: #fff;\r\n    font-size: 21px;\r\n}\r\n\r\n.pdbIcon.rotate i {\r\n    filter: progid: DXImageTransform.Microsoft.BasicImage(rotation=1);\r\n    -webkit-transform: rotate(90deg);\r\n    -moz-transform: rotate(90deg);\r\n    -ms-transform: rotate(90deg);\r\n    -o-transform: rotate(90deg);\r\n    transform: rotate(90deg);\r\n    display: inline-block;\r\n}\r\n\r\n.legendRow{\r\n    min-height: 30px;\r\n    line-height: 30px;\r\n}\r\n\r\n.legendColor {\r\n    display: inline-block;\r\n    height:10px;\r\n    width:26px;\r\n}\r\n\r\n.legendText{\r\n    /* min-width: 135px; */\r\n    display: inline-block;\r\n    font-size: 90%;\r\n    text-align: left;\r\n    color:#333;\r\n    margin-left: 2px;\r\n}\r\n\r\n.protvistaRowGroup{\r\n    max-height: 210px;\r\n    overflow-y: auto;\r\n    clear: both;\r\n    display: none;\r\n}\r\n\r\n.protvistaRowGroup.noPaddingRight > .protvistaRow > .protvistaCol2 {\r\n    padding-right: 0 !important;\r\n}\r\n\r\n.labelZoomIcon{\r\n    position: absolute;\r\n    left: 5px;\r\n    cursor: zoom-in;\r\n    color: #848a86;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    font-size: 12px;\r\n}\r\n\r\n.labelZoomIcon.active{\r\n    cursor: zoom-out!important;\r\n    color: #009e38!important;\r\n}\r\n\r\n.hideLabelIcon{\r\n    position: absolute;\r\n    right: 5px;\r\n    cursor: pointer;\r\n    color: #848a86;\r\n    top: 10%;\r\n    transform: translateY(-10%);\r\n    font-size: 10px;\r\n}\r\n\r\n.protvistaResetSectionIcon{\r\n    position: absolute;\r\n    border: 1px solid #828181;\r\n    background-color: #828181;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    text-align: center;\r\n    width: 20px;\r\n    height: 20px;\r\n    line-height: 19px;\r\n    right: 10px;\r\n    display: none;\r\n}\r\n\r\n.protvistaResetSectionIcon i{\r\n    color: #fff;\r\n    cursor: pointer;\r\n    font-size:80%;\r\n}\r\n\r\n.protvistaToolbar{\r\n    text-align: right;\r\n}\r\n\r\n.protvistaToolbarIcon{\r\n    display: inline-block;\r\n    border: 1px solid #828181;\r\n    background-color: #828181;\r\n    border-radius: 50%;\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    text-align: center;\r\n    width: 30px;\r\n    height: 30px;\r\n    line-height: 28px;\r\n}\r\n\r\n.protvistaToolbar i{\r\n    color: #fff;\r\n    cursor: pointer;\r\n    margin:2px;\r\n}\r\n\r\n.protvistaRangeMenuTitle{\r\n    position: relative;\r\n    color: #1b1919;\r\n}\r\n\r\n.protvistaRangeMenuTitle > div{\r\n    padding: 10px 10px 0 10px;\r\n}\r\n\r\n.protvistaRangeMenuTitle > div:first-child{\r\n    font-weight: bold;\r\n    text-align: left;\r\n}\r\n\r\n.protvistaMenuClose{\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 14px;\r\n    color: #6d6d6d;\r\n    font-size: 12px;\r\n    cursor: pointer;\r\n}\r\n\r\n.protvistaForm{\r\n    padding: 10px;\r\n    font-size: 12px;\r\n    max-height: 300px;\r\n    overflow: auto;\r\n    text-align: left;\r\n    font-weight: 600;\r\n    color: #444;\r\n}\r\n\r\n.divWithScroll {\r\n    position: relative;\r\n    clear: both;\r\n    overflow-y: scroll;\r\n    height:40px;\r\n}\r\n\r\n.label-tooltip .label-tooltip-text {\r\n    visibility: hidden;\r\n    /*white-space: nowrap;*/\r\n    width: 400px;\r\n    background-color: black;\r\n    color: #fff;\r\n    text-align: center;\r\n    border-radius: 6px;\r\n    padding: 5px;\r\n    position: absolute;\r\n    z-index: 1;\r\n    top: 5px;\r\n    left: 100%;\r\n}\r\n  \r\n.label-tooltip .label-tooltip-text::after {\r\n    content: "";\r\n    position: absolute;\r\n    top: 50%;\r\n    right: 100%;\r\n    margin-top: -5px;\r\n    border-width: 5px;\r\n    border-style: solid;\r\n    border-color: transparent black transparent transparent;\r\n}\r\n  \r\n.label-tooltip:hover .label-tooltip-text {\r\n    visibility: visible;\r\n}\r\n\r\n.protvista-pdb protvista-pdb-navigation .handle, \r\n.protvista-pdb protvista-navigation .handle {\r\n    fill: darkgray;\r\n    height: 19px !important;\r\n    stroke: black;\r\n}\r\n\r\nprotvista-tooltip {\r\n    z-index: 50000;\r\n    position: absolute;\r\n    min-width: 220px;\r\n    max-width: 350px;\r\n    margin-top: 20px;\r\n    margin-left: -20px;\r\n    -webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\r\n    -moz-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\r\n    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2);\r\n    /*opacity: .9;*/\r\n}\r\n\r\nprotvista-tooltip[mirror="H"] {\r\n    margin-left: 0;\r\n    margin-right: 20px;\r\n}\r\n\r\nprotvista-tooltip .tooltip-header .tooltip-header-title{\r\n    color: #ffffff;\r\n}\r\n\r\n/* protvista-tooltip a,\r\nprotvista-tooltip a:link,\r\nprotvista-tooltip a:hover,\r\nprotvista-tooltip a:active,\r\nprotvista-tooltip a:visited {\r\n    color: #ffffff;\r\n} */\r\n\r\nprotvista-tooltip .tooltip-body {\r\n    /* color: #ffffff; */\r\n    color: #555;\r\n}\r\n\r\nprotvista-tooltip .tooltip-header {\r\n    background-color: #595959;\r\n    line-height: 3em;\r\n}\r\n\r\n/* protvista-tooltip .tooltip-header::before {\r\n    content: " ";\r\n    position: absolute;\r\n    bottom: 100%;\r\n    left: 20px;\r\n    margin-left: -10px;\r\n    border-width: 10px;\r\n    border-style: solid;\r\n    border-color: transparent transparent black transparent;\r\n} */\r\n\r\nprotvista-tooltip[mirror="H"] .tooltip-header::before {\r\n    left: initial;\r\n    right: 20px;\r\n}\r\n\r\nprotvista-tooltip .tooltip-header .tooltip-header-title {\r\n    /* background-color: #000000;\r\n    font-weight: 700;\r\n    line-height: 1em;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    padding-left: .4em; */\r\n    font-weight: 400;\r\n    white-space: nowrap;\r\n    letter-spacing: .05em;\r\n    font-size: 1.1em;\r\n    background-color: #595959;\r\n    line-height: 2em;\r\n    padding: 0 .7em;\r\n    color: #FFF;\r\n}\r\n\r\nprotvista-tooltip .tooltip-body {\r\n    padding: 1em;\r\n    background: #FFF;\r\n    font-weight: normal;\r\n    max-height: 160px;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\nprotvista-tooltip .tooltip-close {\r\n    height: 3em;\r\n    width: 3em;\r\n    display: inline-block;\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    background-image: url('+i+');\r\n    cursor: pointer;\r\n    vertical-align: middle;\r\n}\r\n\r\nprotvista-tooltip .tooltip-close:hover {\r\n    background-color: #1a1a1a;\r\n}\r\n\r\nprotvista-tooltip table td {\r\n    padding: .5em .5em;\r\n    vertical-align: top;\r\n}\r\n\r\nprotvista-tooltip table td:first-child {\r\n    font-weight: 600;\r\n    text-align: right\r\n}\r\n\r\nprotvista-tooltip table td p {\r\n    margin-top: 0;\r\n}\r\n\r\nprotvista-tooltip table thead, table tbody, table tfoot {\r\n    /* border: 0px solid #f1f1f1;\r\n    background-color: #616161; */\r\n    background-color: #FFF;\r\n}\r\n\r\nprotvista-tooltip .tooltip-body table tbody{\r\n    font-size: 12px;\r\n}\r\n\r\nprotvista-tooltip table tbody tr:nth-child(even) {\r\n    border-bottom: 0;\r\n    /* background-color: #616161; */\r\n    background-color: #FFF;\r\n}\r\n\r\nprotvista-tooltip .tooltip-body table tbody h4, protvista-tooltip .tooltip-body table tbody h5{\r\n    text-align: left;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    color: #333;\r\n}\r\n\r\nprotvista-tooltip h4, protvista-tooltip h5 {\r\n    margin: 0;\r\n}\r\n\r\nprotvista-tooltip table {\r\n    border-spacing: 0;\r\n    border-collapse: collapse;\r\n    background-color: #FFF;\r\n    /* -webkit-box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1);\r\n    -moz-box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1);\r\n    box-shadow: 5px 5px 2px 0 rgba(0,0,0,.1); */\r\n    width: 100%;\r\n    font-family:Verdana,Arial,sans-serif;\r\n    font-size: 93%;\r\n}\r\n\r\nprotvista-tooltip  table td {\r\n    /* border: 1px solid #CCC; */\r\n    color: #555;\r\n}\r\n\r\nprotvista-tooltip  table tr td:first-child {\r\n    font-weight: 700;\r\n}\r\n\r\n/* filter */\r\nul.filter-list {\r\n    list-style:none;\r\n    margin:0;\r\n    padding:0;\r\n}\r\nul.filter-list a {\r\n    cursor:pointer;\r\n}\r\n.filter-list li {\r\n    margin: .4em 0;\r\n}\r\n.filter-select-trigger {\r\n    text-decoration:none;\r\n}\r\n.filter-select-wrapper {\r\n    box-sizing: border-box;\r\n    display:inline-block;\r\n    border-radius:.2em;\r\n    margin-right: .2em;\r\n    margin-left: .3em;\r\n    line-height: .2em;\r\n    padding: .2em;\r\n    border: .1em solid rgba(255, 0, 0, 0);\r\n}\r\n.filter-select {\r\n    margin:0;\r\n    box-sizing:border-box;\r\n    border-radius:.2em;\r\n    width:1.2em;\r\n    height:1.2em;\r\n    display:inline-block;\r\n    background-color: #333333;\r\n}\r\n.filter-select-trigger:hover .filter-select-wrapper {\r\n    border: .1em solid rgba(255, 0, 0, .5);\r\n}\r\n.filter-select-trigger.active .filter-select-wrapper {\r\n    border: .1em solid rgba(255, 0, 0, .9);\r\n}\r\n\r\n.pdbIconsId {\r\n    color: #0000EE !important;\r\n    border-bottom: none !important;\r\n    min-width: 43px;\r\n    display: inline-block;\r\n}\r\n\r\n.pdbIconsId:visited {\r\n    color: #551A8B !important;\r\n    border-bottom: none !important;\r\n}\r\n\r\n.pdbIconslogoA {\r\n    border-bottom: none !important;\r\n}\r\n\r\n.pdbIconslogo {\r\n    display: inline-block;\r\n    padding: 0px 4px;\r\n    height: 18px;\r\n    line-height: 18px;\r\n}\r\n@media (max-width: 1000px) {\r\n    .pdbIconsId{\r\n        min-width: 25px;\r\n    }\r\n    .pdbIconsWrapper{\r\n        display: block;\r\n    }\r\n}\r\n\r\n.protvista-pdb a, .protvista-pdb a:visited {\r\n    border-bottom-width: 1px;\r\n    border-bottom-style: dotted;\r\n    border-bottom-color: inherit;\r\n    text-decoration: none;\r\n    color: #222;\r\n}\r\n\r\n.protvista-pdb a:hover, .protvista-pdb a:focus, .protvista-pdb a:active {\r\n    color: rgb(116,179,96);\r\n}\r\n\r\n.labelTooltipBox {\r\n    max-width: 400px;\r\n    background-color: #e4e2e2;\r\n    color: #222;\r\n    border-radius: 6px;\r\n    padding: 5px 10px;\r\n    position: fixed;\r\n    z-index: 1;\r\n    font-size: 80%;\r\n}\r\n  \r\n.labelTooltipBox::after {\r\n    content: "";\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 100%;\r\n    border-width: 5px;\r\n    border-style: solid;\r\n    border-color: transparent #e4e2e2 transparent transparent;\r\n}\r\n\r\n.viewMenuBox {\r\n    display: block;\r\n    position: absolute;\r\n    z-index: 1;\r\n    background: #fff;\r\n    left: 70%;\r\n    top: 47px;\r\n    min-width: 150px;\r\n    max-width: 280px;\r\n    overflow: auto;\r\n    -webkit-overflow-scrolling: touch;\r\n    max-height: calc(100vh - 48px);\r\n    border-radius: 4px;\r\n    outline: 0;\r\n    box-shadow: 0 2px 4px -1px rgba(0,0,0,.2), 0 4px 5px 0 rgba(0,0,0,.14), 0 1px 10px 0 rgba(0,0,0,.12);\r\n}\r\n\r\n#filter-disease .protvista_checkbox_input + .protvista_checkbox_label::before {\r\nbackground: #990000;\r\nopacity: 0.4;\r\n}\r\n\r\n#filter-disease .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\r\nopacity: 1;\r\n}\r\n\r\n#filter-predicted .protvista_checkbox_input + .protvista_checkbox_label::before {\r\nbackground: linear-gradient(#002594, #8FE3FF);\r\nopacity: 0.4;\r\n}\r\n\r\n#filter-predicted .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\r\nopacity: 1;\r\n}\r\n\r\n#filter-nonDisease .protvista_checkbox_input + .protvista_checkbox_label::before {\r\nbackground: #99cc00;\r\nopacity: 0.4;\r\n}\r\n\r\n#filter-nonDisease .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\r\nopacity: 1;\r\n}\r\n\r\n#filter-uncertain .protvista_checkbox_input + .protvista_checkbox_label::before {\r\nbackground: #FFCC00;\r\nopacity: 0.4;\r\n}\r\n\r\n#filter-uncertain .protvista_checkbox_input:checked + .protvista_checkbox_label::before {\r\nopacity: 1;\r\n}',""])},function(t,e,r){"use strict";t.exports=function(t,e){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)||e?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE3cHgiIGhlaWdodD0iMTdweCIgdmlld0JveD0iMCAwIDE3IDE3IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDguMiAoNDczMjcpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5BcnRib2FyZDwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGRlZnM+PC9kZWZzPg0KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPg0KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIj4NCiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4wMDAwMDAsIDIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNDMxODE4MTgyLDAuNDMxODE4MTgyIEwxMi41MTAzNTM0LDEyLjUxMDM1MzQiIGlkPSJMaW5lIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNDMxODE4MTgyLDAuNDMxODE4MTgyIEwxMi41MTAzNTM0LDEyLjUxMDM1MzQiIGlkPSJMaW5lLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYuNTAwMDAwLCA2LjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNi41MDAwMDAsIC02LjUwMDAwMCkgIj48L3BhdGg+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(t,r,i){"use strict";i.r(r);class n extends HTMLElement{constructor(){super(),this.protvistaElements=new Set}static get observedAttributes(){return["attributes"]}attributeChangedCallback(t,e,r){if(e!==r&&"attributes"===t){if(this._attributes=r.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}}_setAttributes(t,e,r){for(const i of t)!1===r?i.removeAttribute(e):i.setAttribute(e,"boolean"==typeof r?"":r)}_registerProtvistaDescendents(t){for(const e of t.children)e.isManaged&&this.protvistaElements.add(e),this._registerProtvistaDescendents(e)}addListeners(){for(const t of this.protvistaElements)t.addEventListener("change",t=>{-1!==this._attributes.indexOf(t.detail.type)&&this._setAttributes(this.protvistaElements,t.detail.type,t.detail.value);for(let e in t.detail)-1!==this._attributes.indexOf(e)&&this._setAttributes(this.protvistaElements,e,t.detail[e])})}connectedCallback(){this._registerProtvistaDescendents(this),this.addListeners();var t=this;"MutationObserver"in window&&(this.mutationObserver=new MutationObserver(e=>{t._registerProtvistaDescendents(t),t.addListeners()}),this.mutationObserver.observe(this,{childList:!0}))}disconnectedCallback(){this.mutationObserver&&this.mutationObserver.disconnect()}}var s=n,a=i(0),o=i(11),l=i.n(o);class c extends HTMLElement{constructor(){super(),this._updateScaleDomain=this._updateScaleDomain.bind(this),this._initZoom=this._initZoom.bind(this),this.zoomed=this.zoomed.bind(this),this._applyZoomTranslation=this.applyZoomTranslation.bind(this);let t=!1;this.applyZoomTranslation=()=>{t||(t=!0,requestAnimationFrame(()=>{t=!1,this._applyZoomTranslation()}))},this._onResize=this._onResize.bind(this),this._listenForResize=this._listenForResize.bind(this)}connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.width,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",t=>{throw t})}disconnectedCallback(){this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize)}get width(){return this._width}set width(t){this._width=t}set length(t){this._length=t}get length(){return this._length}get xScale(){return this._xScale}set xScale(t){this._xScale=t}get zoom(){return this._zoom}set svg(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}get svg(){return this._svg}get isManaged(){return!0}get margin(){return{top:10,right:10,bottom:10,left:10}}getWidthWithMargins(){return this.width?this.width-this.margin.left-this.margin.right:0}_updateScaleDomain(){this.xScale=Object(a.scaleLinear)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}_initZoom(){this._zoom=Object(a.zoom)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).on("zoom",this.zoomed)}static get observedAttributes(){return["displaystart","displayend","length"]}attributeChangedCallback(t,e,r){if(e!==r){const e=parseFloat(r);this["_"+t]=isNaN(e)?r:e,"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}zoomed(){if(this.xScale=a.event.transform.rescaleX(this._originXScale),this.dontDispatch)return;let[t,e]=this.xScale.domain();e--,this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,t),displayend:Math.min(this.length,e)},bubbles:!0,cancelable:!0}))}applyZoomTranslation(){if(!this.svg||!this._originXScale)return;const t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,a.zoomIdentity.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}_onResize(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}_listenForResize(){this._ro=new l.a(this._onResize),this._ro.observe(this)}getXFromSeqPosition(t){return this.margin.left+this.xScale(t)}getSingleBaseWidth(){return this.xScale(2)-this.xScale(1)}}var h=c;const p=function(){customElements.define("protvista-zoomable",h)};window.customElements?p():document.addEventListener("WebComponentsReady",(function(){p()}));var u=h;var d=class extends u{connectedCallback(){super.connectedCallback(),this._highlightstart=parseInt(this.getAttribute("highlightstart")),this._highlightend=parseInt(this.getAttribute("highlightend")),this.sequence=this.getAttribute("sequence"),this.sequence&&this._createSequence()}static get observedAttributes(){return u.observedAttributes.concat("highlightstart","highlightend")}get data(){return this.sequence}set data(t){"string"==typeof t?this.sequence=t:"sequence"in t&&(this.sequence=t.sequence),this.sequence&&!super.svg?this._createSequence():this.refresh()}_createSequence(){super.svg=Object(a.select)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this.seq_bg=super.svg.append("g").attr("class","background"),this.axis=super.svg.append("g").attr("class","x axis"),this.seq_g=super.svg.append("g").attr("class","sequence").attr("transform","translate(0,30)"),this.seq_g.append("text").attr("class","base").text("T"),this.chWidth=.8*this.seq_g.select("text.base").node().getBBox().width,this.seq_g.select("text.base").remove(),this.highlighted=super.svg.append("rect").attr("class","highlighted").attr("fill","yellow").attr("height",40),this.refresh()}refresh(){if(this.axis){const t=this.getSingleBaseWidth(),e=t-this.chWidth,r=t/2,i=Math.round(Math.max(0,this._displaystart-2)),n=Math.round(Math.min(this.sequence.length,this._displayend+1)),s=e<0?[]:this.sequence.slice(i,n).split("").map((t,e)=>[1+i+e,t]);this.xAxis=Object(a.axisBottom)(this.xScale).tickFormat(t=>Number.isInteger(t)?t:"").ticks(3,"s"),this.axis.call(this.xAxis),this.axis.attr("transform",`translate(${this.margin.left+r},0)`),this.axis.select(".domain").remove(),this.axis.selectAll(".tick line").remove(),this.bases=this.seq_g.selectAll("text.base").data(s,t=>t[0]),this.bases.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",([t])=>this.getXFromSeqPosition(t)+r).text(([t,e])=>e).attr("style","font-family:monospace"),this.bases.exit().remove(),this.bases.attr("x",([t])=>this.getXFromSeqPosition(t)+r),this.background=this.seq_bg.selectAll("rect.base_bg").data(s,t=>t[0]),this.background.enter().append("rect").attr("class","base_bg").attr("height",40).merge(this.background).attr("width",t).attr("fill",([t])=>Math.round(t)%2?"#ccc":"#eee").attr("x",([t])=>this.getXFromSeqPosition(t)),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,e)),this.background.style("opacity",Math.min(1,e)),Number.isInteger(this._highlightstart)&&Number.isInteger(this._highlightend)?this.highlighted.attr("x",super.getXFromSeqPosition(this._highlightstart)).style("opacity",.3).attr("width",t*(this._highlightend-this._highlightstart+1)):this.highlighted.style("opacity",0)}}};const g=function(){customElements.define("protvista-sequence",d)};window.customElements?g():document.addEventListener("WebComponentsReady",(function(){g()}));var f=d,v=i(1),b=i(2),y=b.a.Symbol,m=Object.prototype,_=m.hasOwnProperty,x=m.toString,w=y?y.toStringTag:void 0;var k=function(t){var e=_.call(t,w),r=t[w];try{t[w]=void 0;var i=!0}catch(t){}var n=x.call(t);return i&&(e?t[w]=r:delete t[w]),n},S=Object.prototype.toString;var E=function(t){return S.call(t)},A=y?y.toStringTag:void 0;var C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":A&&A in Object(t)?k(t):E(t)};var j=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var T,L=function(t){if(!j(t))return!1;var e=C(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},O=b.a["__core-js_shared__"],D=(T=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";var P=function(t){return!!D&&D in t},I=Function.prototype.toString;var M=function(t){if(null!=t){try{return I.call(t)}catch(t){}try{return t+""}catch(t){}}return""},q=/^\[object .+?Constructor\]$/,F=Function.prototype,$=Object.prototype,N=F.toString,R=$.hasOwnProperty,z=RegExp("^"+N.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var H=function(t){return!(!j(t)||P(t))&&(L(t)?z:q).test(M(t))};var B=function(t,e){return null==t?void 0:t[e]};var W=function(t,e){var r=B(t,e);return H(r)?r:void 0},V=function(){try{var t=W(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Z=function(t,e,r){"__proto__"==e&&V?V(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var U=function(t,e,r,i){for(var n=-1,s=null==t?0:t.length;++n<s;){var a=t[n];e(i,a,r(a),t)}return i};var G=function(t){return function(e,r,i){for(var n=-1,s=Object(e),a=i(e),o=a.length;o--;){var l=a[t?o:++n];if(!1===r(s[l],l,s))break}return e}}();var X=function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i};var J=function(t){return null!=t&&"object"==typeof t};var Y=function(t){return J(t)&&"[object Arguments]"==C(t)},Q=Object.prototype,K=Q.hasOwnProperty,tt=Q.propertyIsEnumerable,et=Y(function(){return arguments}())?Y:function(t){return J(t)&&K.call(t,"callee")&&!tt.call(t,"callee")},rt=Array.isArray,it=i(4),nt=/^(?:0|[1-9]\d*)$/;var st=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&nt.test(t))&&t>-1&&t%1==0&&t<e};var at=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot["[object Arguments]"]=ot["[object Array]"]=ot["[object ArrayBuffer]"]=ot["[object Boolean]"]=ot["[object DataView]"]=ot["[object Date]"]=ot["[object Error]"]=ot["[object Function]"]=ot["[object Map]"]=ot["[object Number]"]=ot["[object Object]"]=ot["[object RegExp]"]=ot["[object Set]"]=ot["[object String]"]=ot["[object WeakMap]"]=!1;var lt=function(t){return J(t)&&at(t.length)&&!!ot[C(t)]};var ct=function(t){return function(e){return t(e)}},ht=i(3),pt=ht.a&&ht.a.isTypedArray,ut=pt?ct(pt):lt,dt=Object.prototype.hasOwnProperty;var gt=function(t,e){var r=rt(t),i=!r&&et(t),n=!r&&!i&&Object(it.a)(t),s=!r&&!i&&!n&&ut(t),a=r||i||n||s,o=a?X(t.length,String):[],l=o.length;for(var c in t)!e&&!dt.call(t,c)||a&&("length"==c||n&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||st(c,l))||o.push(c);return o},ft=Object.prototype;var vt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ft)};var bt=function(t,e){return function(r){return t(e(r))}},yt=bt(Object.keys,Object),mt=Object.prototype.hasOwnProperty;var _t=function(t){if(!vt(t))return yt(t);var e=[];for(var r in Object(t))mt.call(t,r)&&"constructor"!=r&&e.push(r);return e};var xt=function(t){return null!=t&&at(t.length)&&!L(t)};var wt=function(t){return xt(t)?gt(t):_t(t)};var kt=function(t,e){return t&&G(t,e,wt)};var St=function(t,e){return function(r,i){if(null==r)return r;if(!xt(r))return t(r,i);for(var n=r.length,s=e?n:-1,a=Object(r);(e?s--:++s<n)&&!1!==i(a[s],s,a););return r}}(kt);var Et=function(t,e,r,i){return St(t,(function(t,n,s){e(i,t,r(t),s)})),i};var At=function(){this.__data__=[],this.size=0};var Ct=function(t,e){return t===e||t!=t&&e!=e};var jt=function(t,e){for(var r=t.length;r--;)if(Ct(t[r][0],e))return r;return-1},Tt=Array.prototype.splice;var Lt=function(t){var e=this.__data__,r=jt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Tt.call(e,r,1),--this.size,!0)};var Ot=function(t){var e=this.__data__,r=jt(e,t);return r<0?void 0:e[r][1]};var Dt=function(t){return jt(this.__data__,t)>-1};var Pt=function(t,e){var r=this.__data__,i=jt(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this};function It(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}It.prototype.clear=At,It.prototype.delete=Lt,It.prototype.get=Ot,It.prototype.has=Dt,It.prototype.set=Pt;var Mt=It;var qt=function(){this.__data__=new Mt,this.size=0};var Ft=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var $t=function(t){return this.__data__.get(t)};var Nt=function(t){return this.__data__.has(t)},Rt=W(b.a,"Map"),zt=W(Object,"create");var Ht=function(){this.__data__=zt?zt(null):{},this.size=0};var Bt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wt=Object.prototype.hasOwnProperty;var Vt=function(t){var e=this.__data__;if(zt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Wt.call(e,t)?e[t]:void 0},Zt=Object.prototype.hasOwnProperty;var Ut=function(t){var e=this.__data__;return zt?void 0!==e[t]:Zt.call(e,t)};var Gt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=zt&&void 0===e?"__lodash_hash_undefined__":e,this};function Xt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Xt.prototype.clear=Ht,Xt.prototype.delete=Bt,Xt.prototype.get=Vt,Xt.prototype.has=Ut,Xt.prototype.set=Gt;var Jt=Xt;var Yt=function(){this.size=0,this.__data__={hash:new Jt,map:new(Rt||Mt),string:new Jt}};var Qt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Kt=function(t,e){var r=t.__data__;return Qt(e)?r["string"==typeof e?"string":"hash"]:r.map};var te=function(t){var e=Kt(this,t).delete(t);return this.size-=e?1:0,e};var ee=function(t){return Kt(this,t).get(t)};var re=function(t){return Kt(this,t).has(t)};var ie=function(t,e){var r=Kt(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this};function ne(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}ne.prototype.clear=Yt,ne.prototype.delete=te,ne.prototype.get=ee,ne.prototype.has=re,ne.prototype.set=ie;var se=ne;var ae=function(t,e){var r=this.__data__;if(r instanceof Mt){var i=r.__data__;if(!Rt||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new se(i)}return r.set(t,e),this.size=r.size,this};function oe(t){var e=this.__data__=new Mt(t);this.size=e.size}oe.prototype.clear=qt,oe.prototype.delete=Ft,oe.prototype.get=$t,oe.prototype.has=Nt,oe.prototype.set=ae;var le=oe;var ce=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var he=function(t){return this.__data__.has(t)};function pe(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new se;++e<r;)this.add(t[e])}pe.prototype.add=pe.prototype.push=ce,pe.prototype.has=he;var ue=pe;var de=function(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1};var ge=function(t,e){return t.has(e)};var fe=function(t,e,r,i,n,s){var a=1&r,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var h=-1,p=!0,u=2&r?new ue:void 0;for(s.set(t,e),s.set(e,t);++h<o;){var d=t[h],g=e[h];if(i)var f=a?i(g,d,h,e,t,s):i(d,g,h,t,e,s);if(void 0!==f){if(f)continue;p=!1;break}if(u){if(!de(e,(function(t,e){if(!ge(u,e)&&(d===t||n(d,t,r,i,s)))return u.push(e)}))){p=!1;break}}else if(d!==g&&!n(d,g,r,i,s)){p=!1;break}}return s.delete(t),s.delete(e),p},ve=b.a.Uint8Array;var be=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,i){r[++e]=[i,t]})),r};var ye=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},me=y?y.prototype:void 0,_e=me?me.valueOf:void 0;var xe=function(t,e,r,i,n,s,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new ve(t),new ve(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ct(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var o=be;case"[object Set]":var l=1&i;if(o||(o=ye),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=2,a.set(t,e);var h=fe(o(t),o(e),i,n,s,a);return a.delete(t),h;case"[object Symbol]":if(_e)return _e.call(t)==_e.call(e)}return!1};var we=function(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t};var ke=function(t,e,r){var i=e(t);return rt(t)?i:we(i,r(t))};var Se=function(t,e){for(var r=-1,i=null==t?0:t.length,n=0,s=[];++r<i;){var a=t[r];e(a,r,t)&&(s[n++]=a)}return s};var Ee=function(){return[]},Ae=Object.prototype.propertyIsEnumerable,Ce=Object.getOwnPropertySymbols,je=Ce?function(t){return null==t?[]:(t=Object(t),Se(Ce(t),(function(e){return Ae.call(t,e)})))}:Ee;var Te=function(t){return ke(t,wt,je)},Le=Object.prototype.hasOwnProperty;var Oe=function(t,e,r,i,n,s){var a=1&r,o=Te(t),l=o.length;if(l!=Te(e).length&&!a)return!1;for(var c=l;c--;){var h=o[c];if(!(a?h in e:Le.call(e,h)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var u=!0;s.set(t,e),s.set(e,t);for(var d=a;++c<l;){var g=t[h=o[c]],f=e[h];if(i)var v=a?i(f,g,h,e,t,s):i(g,f,h,t,e,s);if(!(void 0===v?g===f||n(g,f,r,i,s):v)){u=!1;break}d||(d="constructor"==h)}if(u&&!d){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(u=!1)}return s.delete(t),s.delete(e),u},De=W(b.a,"DataView"),Pe=W(b.a,"Promise"),Ie=W(b.a,"Set"),Me=W(b.a,"WeakMap"),qe=M(De),Fe=M(Rt),$e=M(Pe),Ne=M(Ie),Re=M(Me),ze=C;(De&&"[object DataView]"!=ze(new De(new ArrayBuffer(1)))||Rt&&"[object Map]"!=ze(new Rt)||Pe&&"[object Promise]"!=ze(Pe.resolve())||Ie&&"[object Set]"!=ze(new Ie)||Me&&"[object WeakMap]"!=ze(new Me))&&(ze=function(t){var e=C(t),r="[object Object]"==e?t.constructor:void 0,i=r?M(r):"";if(i)switch(i){case qe:return"[object DataView]";case Fe:return"[object Map]";case $e:return"[object Promise]";case Ne:return"[object Set]";case Re:return"[object WeakMap]"}return e});var He=ze,Be=Object.prototype.hasOwnProperty;var We=function(t,e,r,i,n,s){var a=rt(t),o=rt(e),l=a?"[object Array]":He(t),c=o?"[object Array]":He(e),h="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),p="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),u=l==c;if(u&&Object(it.a)(t)){if(!Object(it.a)(e))return!1;a=!0,h=!1}if(u&&!h)return s||(s=new le),a||ut(t)?fe(t,e,r,i,n,s):xe(t,e,l,r,i,n,s);if(!(1&r)){var d=h&&Be.call(t,"__wrapped__"),g=p&&Be.call(e,"__wrapped__");if(d||g){var f=d?t.value():t,v=g?e.value():e;return s||(s=new le),n(f,v,r,i,s)}}return!!u&&(s||(s=new le),Oe(t,e,r,i,n,s))};var Ve=function t(e,r,i,n,s){return e===r||(null==e||null==r||!J(e)&&!J(r)?e!=e&&r!=r:We(e,r,i,n,t,s))};var Ze=function(t,e,r,i){var n=r.length,s=n,a=!i;if(null==t)return!s;for(t=Object(t);n--;){var o=r[n];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<s;){var l=(o=r[n])[0],c=t[l],h=o[1];if(a&&o[2]){if(void 0===c&&!(l in t))return!1}else{var p=new le;if(i)var u=i(c,h,l,t,e,p);if(!(void 0===u?Ve(h,c,3,i,p):u))return!1}}return!0};var Ue=function(t){return t==t&&!j(t)};var Ge=function(t){for(var e=wt(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,Ue(n)]}return e};var Xe=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var Je=function(t){var e=Ge(t);return 1==e.length&&e[0][2]?Xe(e[0][0],e[0][1]):function(r){return r===t||Ze(r,t,e)}};var Ye=function(t){return"symbol"==typeof t||J(t)&&"[object Symbol]"==C(t)},Qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ke=/^\w*$/;var tr=function(t,e){if(rt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ye(t))||(Ke.test(t)||!Qe.test(t)||null!=e&&t in Object(e))};function er(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(er.Cache||se),r}er.Cache=se;var rr=er;var ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nr=/\\(\\)?/g,sr=function(t){var e=rr(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ir,(function(t,r,i,n){e.push(i?n.replace(nr,"$1"):r||t)})),e}));var ar=function(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n},or=y?y.prototype:void 0,lr=or?or.toString:void 0;var cr=function t(e){if("string"==typeof e)return e;if(rt(e))return ar(e,t)+"";if(Ye(e))return lr?lr.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r};var hr=function(t){return null==t?"":cr(t)};var pr=function(t,e){return rt(t)?t:tr(t,e)?[t]:sr(hr(t))};var ur=function(t){if("string"==typeof t||Ye(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var dr=function(t,e){for(var r=0,i=(e=pr(e,t)).length;null!=t&&r<i;)t=t[ur(e[r++])];return r&&r==i?t:void 0};var gr=function(t,e,r){var i=null==t?void 0:dr(t,e);return void 0===i?r:i};var fr=function(t,e){return null!=t&&e in Object(t)};var vr=function(t,e,r){for(var i=-1,n=(e=pr(e,t)).length,s=!1;++i<n;){var a=ur(e[i]);if(!(s=null!=t&&r(t,a)))break;t=t[a]}return s||++i!=n?s:!!(n=null==t?0:t.length)&&at(n)&&st(a,n)&&(rt(t)||et(t))};var br=function(t,e){return null!=t&&vr(t,e,fr)};var yr=function(t,e){return tr(t)&&Ue(e)?Xe(ur(t),e):function(r){var i=gr(r,t);return void 0===i&&i===e?br(r,t):Ve(e,i,3)}};var mr=function(t){return t};var _r=function(t){return function(e){return null==e?void 0:e[t]}};var xr=function(t){return function(e){return dr(e,t)}};var wr=function(t){return tr(t)?_r(ur(t)):xr(t)};var kr=function(t){return"function"==typeof t?t:null==t?mr:"object"==typeof t?rt(t)?yr(t[0],t[1]):Je(t):wr(t)};var Sr=function(t,e){return function(r,i){var n=rt(r)?U:Et,s=e?e():{};return n(r,t,kr(i,2),s)}},Er=Object.prototype.hasOwnProperty,Ar=Sr((function(t,e,r){Er.call(t,r)?t[r].push(e):Z(t,r,[e])}));i(9);class Cr extends HTMLElement{static get tagName(){return"protvista-checkbox"}constructor(){super(),this._toggleChecked=this._toggleChecked.bind(this)}connectedCallback(){this._render()}static get observedAttributes(){return["checked","disabled","value"]}attributeChangedCallback(t,e,r){switch(t){case"checked":this.checked=!0;break;case"disabled":this.disabled=!0;break;case"value":this.value=r}}_render(){let{value:t,options:{labels:e,colors:r},checked:i=!1,disabled:n=!1}=this;null==r.length&&(r=[r]),t="filter-"+t.split(":")[1];const s=r.length>1;Object(v.render)(v.html`
      <style>
        #${t} .protvista_checkbox_input + .protvista_checkbox_label::before {
          background: ${s?v.html`linear-gradient(${r[0]}, ${r[1]})`:r[0]};
          opacity: 0.4;
        }

        #${t} .protvista_checkbox_input:checked + .protvista_checkbox_label::before {
          opacity: 1;
        }
      </style>
      <label id="${t}"
             class="protvista_checkbox ${s?"compound":""}"
             tabindex="0">
        <input type="checkbox"
              class="protvista_checkbox_input"
              ?checked="${i}"
              ?disabled="${n}"
              .value="${t}"
              @change="${this._toggleChecked}">
        <span class="protvista_checkbox_label">
          ${e.map(t=>v.html`<span>${t}</span>`)}
        </span>
      </label>
    `,this)}_toggleChecked(t){t.stopPropagation(),this.checked=!this.checked,this._fireEvent(),this._render()}_fireEvent(){this.dispatchEvent(new CustomEvent("filterChange",{bubbles:!0,composed:!0,detail:{checked:this.checked,value:this.value}}))}}customElements.define(Cr.tagName,Cr);class jr extends HTMLElement{static get tagName(){return"protvista-filter"}constructor(){super(),this._filters=[],this._selectedFilters=new Set}get isManaged(){return!0}static get observedAttributes(){return["filters"]}attributeChangedCallback(t,e,r){if(e!==r){if("filters"!==t)return;this._filters=JSON.parse(r),this._filters.forEach(({name:t,type:e,options:r})=>{r.selected&&this._selectedFilters.add(`${e.name}:${t}`)}),this._renderFilters()}}connectedCallback(){this._renderFilters(),this.addEventListener("filterChange",this._onFilterChange)}disconnectedCallback(){this.removeEventListener("filterChange",this._onFilterChange)}_renderFilters(){const t=Ar(this._filters,t=>t.type.text),e=t=>v.html`
      <div style="display: flex; flex-direction: column;">
        ${t}
      </div>
    `,r=v.html`
      ${e(Object.keys(t).map(r=>{return v.html`
          ${i=r,v.html`
      <h5>${i}</h5>
    `}
          ${e(t[r].map(({name:t,type:e,options:r})=>v.html`
              <protvista-checkbox
                  value="${e.name}:${t}"
                  .options="${r}"
                  ?checked="${r.selected}"></protvista-checkbox>`))}
        `;var i}))}
    `;var i;Object(v.render)((i=r,v.html`
      <div style="display: flex;">
        ${i}
      </div>
    `),this)}_onFilterChange(t){let{detail:{checked:e,value:r}}=t;e?this._selectedFilters.add(r):this._selectedFilters.delete(r),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{type:"activefilters",value:[...this._selectedFilters]}}))}_fireEvent(t){this.dispatchEvent(t)}}var Tr=jr;const Lr=10,Or=10,Dr=10;class Pr extends HTMLElement{constructor(){super(),this._x=null,this.dontDispatch=!1}connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}disconnectedCallback(){this._ro?this._ro.unobserve(this):window.removeEventListener(this._onResize)}static get observedAttributes(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}attributeChangedCallback(t,e,r){e!==r&&(this["_"+t]=parseFloat(r),this._updateNavRuler())}get width(){return this._width}set width(t){this._width=t}get isManaged(){return!0}_createNavRuler(){this._x=Object(a.scaleLinear)().range([Dr,this.width-Lr]),this._x.domain([1,this._length]),this._svg=Object(a.select)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(a.axisBottom)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-Or),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-Or).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(a.brushX)().extent([[Dr,0],[this.width-Lr,20.4]]).on("brush",()=>{a.event.selection&&(this._displaystart=Object(a.format)("d")(this._x.invert(a.event.selection[0])),this._displayend=Object(a.format)("d")(this._x.invert(a.event.selection[1])),this.dontDispatch||this.dispatchEvent(new CustomEvent("change",{detail:{displayend:this._displayend,displaystart:this._displaystart,extra:{transform:a.event.transform}},bubbles:!0,cancelable:!0})),this._updateLabels(),this._updatePolygon())}),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}_onResize(){this.width=this.offsetWidth,this._x=this._x.range([Dr,this.width-Lr]),this._svg.attr("width",this.width),this._axis.call(this._xAxis),this._viewport.extent([[Dr,0],[this.width-Lr,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}_updateNavRuler(){this._x&&(this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}_updateLabels(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}_updatePolygon(){this.polygon&&this.polygon.attr("points",`${this._x(this._displaystart)},20\n        ${this._x(this._displayend)},20\n        ${this.width},40\n        0,40`)}}var Ir=Pr;const Mr=function(){customElements.define("protvista-navigation",Ir)};window.customElements?Mr():document.addEventListener("WebComponentsReady",(function(){Mr()}));var qr=Ir;const Fr=10,$r=10,Nr=10;var Rr=class extends qr{connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._offset=parseFloat(this.getAttribute("offset"))||0,this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||this._offset>0?this._offset:1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._offset>0?this._length+this._offset-1:this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}_createNavRuler(){let t=this._offset>0?this._offset:1,e=this._offset>0?this._length+this._offset-1:this._length;this._x=Object(a.scaleLinear)().range([Nr,this.width-Fr]),this._x.domain([t,e]),this._svg=Object(a.select)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(a.axisBottom)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-$r),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-$r).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(a.brushX)().extent([[Nr,0],[this.width-Fr,20.4]]).on("brush",()=>{a.event.selection&&(this._displaystart=Object(a.format)("d")(this._x.invert(a.event.selection[0])),this._displayend=Object(a.format)("d")(this._x.invert(a.event.selection[1])),this.dontDispatch||this.dispatchEvent(new CustomEvent("change",{detail:{displayend:this._displayend,displaystart:this._displaystart,extra:{transform:a.event.transform}},bubbles:!0,cancelable:!0})),this._updateLabels(),this._updatePolygon())}),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}};var zr=function(t,e,r,i){for(var n=t.length,s=r+(i?1:-1);i?s--:++s<n;)if(e(t[s],s,t))return s;return-1};var Hr=function(t){return t!=t};var Br=function(t,e,r){for(var i=r-1,n=t.length;++i<n;)if(t[i]===e)return i;return-1};var Wr=function(t,e,r){return e==e?Br(t,e,r):zr(t,Hr,r)};var Vr=function(t){return"string"==typeof t||!rt(t)&&J(t)&&"[object String]"==C(t)},Zr=/^\s+|\s+$/g,Ur=/^[-+]0x[0-9a-f]+$/i,Gr=/^0b[01]+$/i,Xr=/^0o[0-7]+$/i,Jr=parseInt;var Yr=function(t){if("number"==typeof t)return t;if(Ye(t))return NaN;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Zr,"");var r=Gr.test(t);return r||Xr.test(t)?Jr(t.slice(2),r?2:8):Ur.test(t)?NaN:+t};var Qr=function(t){return t?(t=Yr(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Kr=function(t){var e=Qr(t),r=e%1;return e==e?r?e-r:e:0};var ti=function(t,e){return ar(e,(function(e){return t[e]}))};var ei=function(t){return null==t?[]:ti(t,wt(t))},ri=Math.max;var ii=function(t,e,r,i){t=xt(t)?t:ei(t),r=r&&!i?Kr(r):0;var n=t.length;return r<0&&(r=ri(n+r,0)),Vr(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&Wr(t,e,r)>-1};class ni{getFeatureShape(t,e,r,i){i=i||"rectangle",this._ftLength=r,this._ftHeight=e,this._ftWidth=t*r,"function"!=typeof this["_"+i]&&(i="rectangle");return this["_"+i]()}static isContinuous(t){return"bridge"!==type.toLowerCase()}_rectangle(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}_roundRectangle(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+"-6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+"-6,"+"-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+"-6Z"}_bridge(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}_getMiddleLine(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}_diamond(){const t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}_chevron(){const t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_catFace(){const t=this._ftWidth/2;var e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_triangle(){const t=this._ftWidth/2;var e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_wave(){const t=this._ftWidth/2;var e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getPolygon(t){let e="M ";const r=this._ftWidth/2;for(var i=0;i<t;i++)e+=5*Math.cos(2*Math.PI*i/t)+r+","+(5*Math.sin(2*Math.PI*i/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+r)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_hexagon(){return this._getPolygon(6)}_pentagon(){return this._getPolygon(5)}_circle(){const t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),r="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?r+this._getMiddleLine(5,this._ftWidth)+"Z":r+"Z"}_arrow(){const t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_doubleBar(){const t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getBrokenEnd(){const t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}_getBrokenStart(){const t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}_discontinuosStart(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuos(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuosEnd(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}}var si=function(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t};var ai=function(t){return"function"==typeof t?t:mr};var oi=function(t,e){return(rt(t)?si:St)(t,ai(e))};var li=function(t,e){var r;return St(t,(function(t,i,n){return!(r=e(t,i,n))})),!!r};var ci=function(t,e,r){if(!j(r))return!1;var i=typeof e;return!!("number"==i?xt(r)&&st(e,r.length):"string"==i&&e in r)&&Ct(r[e],t)};var hi=function(t,e,r){var i=rt(t)?de:li;return r&&ci(t,e,r)&&(e=void 0),i(t,kr(e,3))};class pi{constructor({features:t,layoutHeight:e,padding:r=1,minHeight:i=17}){this._padding=r,this._minHeight=i,this._layoutHeight=e}init(t){this._features=t}getFeatureYPos(t){return Math.min(this._layoutHeight,this._minHeight)}getFeatureHeight(t){return Math.min(this._layoutHeight,this._minHeight)}}class ui{constructor(){this._rowFeatures=[]}_featureOverlap(t,e,r,i){const n=Number(t.start)>=Number(e.start)&&Number(t.start)<=Number(i),s=Number(r)>=Number(e.start)&&Number(r)<=Number(i);return n||s}_dOverlap(t,e,r,i){const n=Number(e.start)>=Number(t.start)&&Number(e.start)<=Number(r),s=Number(i)>=Number(t.start)&&Number(i)<=Number(r);return n||s}_addAbsoluteLimits(t){const e=t.locations.reduce((t,e)=>t.concat(e.fragments),[]).reduce((t,e)=>({start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}),{start:Number.POSITIVE_INFINITY,end:Number.NEGATIVE_INFINITY});t.start=e.start,t.end=e.end}containsOverlap(t){return this._addAbsoluteLimits(Object.assign(t)),hi(this._rowFeatures,e=>{this._addAbsoluteLimits(Object.assign(e));const r=t.end?t.end:t.start,i=e.end?e.end:e.start;return this._featureOverlap(t,e,r,i)||this._dOverlap(t,e,r,i)})}addFeature(t){this._rowFeatures.push(t)}}class di extends pi{constructor(t){super(t),this._rowHeight=0,this._rows=[],this._minHeight=15}init(t){this._features=t,oi(this._features,t=>{if(!hi(this._rows,e=>{if(!e.containsOverlap(t))return e.addFeature(t),!0})){let e=new ui;e.addFeature(t),this._rows.push(e)}}),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)-2*this._padding}getFeatureYPos(t){let e;const r=this._layoutHeight/this._rows.length>this._minHeight?(this._layoutHeight-this._rows.length*this._minHeight)/2:0;return oi(this._rows,(i,n)=>{oi(i._rowFeatures,i=>{i===t&&(e=n*(this._rowHeight+2*this._padding)+r)})}),e}getFeatureHeight(){return this._rowHeight}}const gi={chain:{label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},transit:{label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},init_met:{label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},propep:{label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},peptide:{label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},signal:{label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},helix:{label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},strand:{label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},turn:{label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},disulfid:{label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},crosslnk:{label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},region:{label:"Region",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},coiled:{label:"Coiled coil",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},motif:{label:"Motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},repeat:{label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},ca_bind:{label:"Calcium binding",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},dna_bind:{label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},domain:{label:"Domain",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},zn_fing:{label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},np_bind:{label:"Nucleotide binding",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},metal:{label:"Metal binding",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},site:{label:"Site",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},binding:{label:"Binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},act_site:{label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},mod_res:{label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},lipid:{label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},carbohyd:{label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},compbias:{label:"Compositional bias",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},conflict:{label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},non_cons:{label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},non_ter:{label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},unsure:{label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},non_std:{label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},mutagen:{label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},topo_dom:{label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},transmem:{label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},intramem:{label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},variant:{label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},unique:{label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},non_unique:{label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},antigen:{label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},pdbe_cover:{label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}};class fi{constructor(t){this._config=t}getShapeByType(t){return this._config[t.toLowerCase()]?this._config[t.toLowerCase()].shape:"rectangle"}getColorByType(t){return this._config[t.toLowerCase()]?this._config[t.toLowerCase()].color:"black"}}var vi=class extends u{getLayout(t){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new di({layoutHeight:this._height}):new pi({layoutHeight:this._height})}set height(t){this._height=t}get height(){return this._height}connectedCallback(){super.connectedCallback(),this._highlightstart=parseInt(this.getAttribute("highlightstart")),this._highlightend=parseInt(this.getAttribute("highlightend")),this._height=this.getAttribute("height")?parseInt(this.getAttribute("height")):44,this._tooltipEvent=this.getAttribute("tooltip-event")?this.getAttribute("tooltip-event"):"mouseover",this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new ni,this._layoutObj=this.getLayout(),this._config=new fi(gi),this.createTooltip=this.createTooltip.bind(this),this._data&&this._createTrack(),this.addEventListener("load",t=>{ii(this.children,t.target)&&(this.data=t.detail.payload)})}normalizeLocations(t){return t.map(t=>{const{locations:e,start:r,end:i}=t;return e?t:Object.assign(t,{locations:[{fragments:[{start:r,end:i}]}]})})}set data(t){this._data=this.normalizeLocations(t),this._createTrack()}static get observedAttributes(){return["length","displaystart","displayend","highlightstart","highlightend","color","shape","layout"]}_getFeatureColor(t){return t.color?t.color:this._color?this._color:t.type?this._config.getColorByType(t.type):"black"}_getShape(t){return t.shape?t.shape:this._shape?this._shape:t.type?this._config.getShapeByType(t.type):"rectangle"}_createTrack(){this._layoutObj.init(this._data),Object(a.select)(this).selectAll("svg").remove(),this.svg=Object(a.select)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0 ,"+this.margin.top+")"),this._createFeatures(),this.refresh()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",t=>"g_"+t.accession).selectAll("g.location-group").data(t=>t.locations.map(e=>Object.assign({},e,{feature:t}))).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data(t=>t.fragments.map(e=>Object.assign({},e,{feature:t.feature}))).enter().append("path").attr("class","feature").attr("tooltip-trigger","true").attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t.feature))).attr("transform",t=>"translate("+this.getXFromSeqPosition(t.start)+","+(this.margin.top+this._layoutObj.getFeatureYPos(t.feature))+")").attr("fill",t=>this._getFeatureColor(t.feature)).attr("stroke",t=>this._getFeatureColor(t.feature)).on("mouseover",t=>{var e=this,r=a.event;"mouseover"===this._tooltipEvent&&window.setTimeout((function(){e.createTooltip(r,t)}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))}).on("mouseout",()=>{var t=this;"mouseover"===this._tooltipEvent&&window.setTimeout((function(){t.removeAllTooltips()}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0}))}).on("click",t=>{"click"===this._tooltipEvent&&this.createTooltip(a.event,t,!0)})}createTooltip(t,e,r=!1){if(!e.feature||!e.feature.tooltipContent)return;this.removeAllTooltips();const i=document.createElement("protvista-tooltip");i.top=t.clientY+3,i.left=t.clientX+2,i.title=`${e.feature.type} ${e.start}-${e.end}`,i.closeable=r,i.content=e.feature.tooltipContent,this.appendChild(i);const n=this.svg._groups[0][0].clientWidth,s=Object(a.select)(i).node().getBoundingClientRect();s.width+s.x>n&&(this.removeChild(i),i.left=n-s.width,i.mirror="H",this.appendChild(i))}removeAllTooltips(){document.querySelectorAll("protvista-tooltip").forEach(t=>t.remove())}refresh(){this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce((t,e)=>t.concat(e.locations.reduce((t,r)=>t.concat(r.fragments.map(t=>Object.assign({},t,{feature:e}))),[])),[])),this.features.attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t.feature))).attr("transform",t=>"translate("+this.getXFromSeqPosition(t.start)+","+(this.margin.top+this._layoutObj.getFeatureYPos(t.feature))+")"),this._updateHighlight())}_updateHighlight(){Number.isInteger(this._highlightstart)&&Number.isInteger(this._highlightend)?this.highlighted.attr("x",this.getXFromSeqPosition(this._highlightstart)).style("opacity",.3).attr("width",this.getSingleBaseWidth()*(this._highlightend-this._highlightstart+1)):this.highlighted.style("opacity",0)}};const bi=function(){customElements.define("protvista-track",vi)};window.customElements?bi():document.addEventListener("WebComponentsReady",(function(){bi()}));var yi=vi;var mi=class extends yi{connectedCallback(){super.connectedCallback()}_createTrack(){this._layoutObj.init(this._data),a.select(this).selectAll("svg").remove(),this.svg=a.select(this).append("div").style("line-height",0).append("svg").style("width","100%").attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("stroke","black").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0,-5)"),this._createFeatures(),this.refresh()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",t=>"g_"+t.accession).selectAll("g.location-group").data(t=>t.locations.map(e=>Object.assign({},e,{feature:t}))).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data(t=>t.fragments.map(e=>Object.assign({},e,{feature:t.feature}))).enter().append("path").attr("class","feature").attr("tooltip-trigger","true").attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t))).attr("transform",t=>"translate("+this.getXFromSeqPosition(t.start)+","+(this.margin.top+this._layoutObj.getFeatureYPos(t.feature))+")").attr("fill",(t,e)=>{let r=t.feature;return t.feature.color&&(r={color:t.feature.color}),t.feature.locations&&t.feature.locations[0].fragments[e]&&t.feature.locations[0].fragments[e].color&&(r={color:t.feature.locations[0].fragments[e].color}),this._getFeatureColor(r)}).attr("stroke",(t,e)=>{let r=t.feature;t.feature.color&&(r={color:t.feature.color}),t.feature.locations&&t.feature.locations[0].fragments[e]&&t.feature.locations[0].fragments[e].color&&(r={color:t.feature.locations[0].fragments[e].color});let i=this._getFeatureColor(r);return this.colorMixer(-.3,i)}).on("mouseover",(t,e)=>{const r=this,i=a.event,n=document.querySelectorAll("protvista-tooltip");n&&n[0]&&"click-open"==n[0].className||window.setTimeout((function(){r.createTooltip(i,t)}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0})),t.trackIndex=e,this.dispatchEvent(new CustomEvent("protvista-mouseover",{detail:t,bubbles:!0,cancelable:!0}))}).on("mouseout",()=>{const t=this,e=document.querySelectorAll("protvista-tooltip");e&&e[0]&&"click-open"==e[0].className||window.setTimeout((function(){t.removeAllTooltips()}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0})),this.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))}).on("click",(t,e)=>{t.trackIndex=e,this.createTooltip(a.event,t,!0),this.dispatchEvent(new CustomEvent("protvista-click",{detail:t,bubbles:!0,cancelable:!0}))})}_getShape(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:"rectangle"}createTooltip(t,e,r=!1){this.removeAllTooltips();const i=document.createElement("protvista-tooltip");i.left=t.pageX+15,i.top=t.pageY+5,i.style.marginLeft=0,i.style.marginTop=0,i.title=`${e.feature.type} ${e.start}-${e.end}`,e.start==e.end&&(i.title=`${e.feature.type} residue ${e.start}`),i.closeable=r,i.content=e.feature.tooltipContent,e.tooltipContent&&(i.content=e.tooltipContent),"click"==t.type&&i.classList.add("click-open"),document.body.appendChild(i);const n=a.select(i).node(),s=n.getBoundingClientRect(),o=window.innerHeight-t.clientY,l=window.innerWidth-t.clientX;o<130&&(n.style.top=t.pageY-(s.height+20)+"px"),l<300&&(n.style.left="",n.style.right=l-10+"px")}colorMixer(t,e,r,i){let n,s,a,o,l,c,h,p=parseInt,u=Math.round,d="string"==typeof r;return"number"!=typeof t||t<-1||t>1||"string"!=typeof e||"r"!=e[0]&&"#"!=e[0]||r&&!d?null:(this.pSBCr||(this.pSBCr=t=>{let e=t.length,r={};if(e>9){if([n,s,a,d]=t=t.split(","),e=t.length,e<3||e>4)return null;r.r=p("a"==n[3]?n.slice(5):n.slice(4)),r.g=p(s),r.b=p(a),r.a=d?parseFloat(d):-1}else{if(8==e||6==e||e<4)return null;e<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(e>4?t[4]+t[4]:"")),t=p(t.slice(1),16),9==e||5==e?(r.r=t>>24&255,r.g=t>>16&255,r.b=t>>8&255,r.a=u((255&t)/.255)/1e3):(r.r=t>>16,r.g=t>>8&255,r.b=255&t,r.a=-1)}return r}),h=e.length>9,h=d?r.length>9||"c"==r&&!h:h,l=this.pSBCr(e),o=t<0,c=r&&"c"!=r?this.pSBCr(r):o?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},o=1-(t=o?-1*t:t),l&&c?(i?(n=u(o*l.r+t*c.r),s=u(o*l.g+t*c.g),a=u(o*l.b+t*c.b)):(n=u((o*l.r**2+t*c.r**2)**.5),s=u((o*l.g**2+t*c.g**2)**.5),a=u((o*l.b**2+t*c.b**2)**.5)),d=l.a,c=c.a,l=d>=0||c>=0,d=l?d<0?c:c<0?d:d*o+c*t:0,h?"rgb"+(l?"a(":"(")+n+","+s+","+a+(l?","+u(1e3*d)/1e3:"")+")":"#"+(4294967296+16777216*n+65536*s+256*a+(l?u(255*d):0)).toString(16).slice(1,l?void 0:-2)):null)}};var _i=class extends mi{constructor(){super()}connectedCallback(){super.connectedCallback(),this._accession=this.getAttribute("accession"),this._data=void 0,this._height=parseInt(this.getAttribute("height"))||44}set data(t){this._data=t[this._accession].data,this._createTrack()}getFeatureShape(t,e,r){return"M0,"+t+"L0,"+(t-r)+"L"+e+","+(t-r)+"L"+e+","+t+"Z"}_createFeatures(){this._yScale=Object(a.scaleLinear)().domain([0,10]).range([0,30]);this.getSingleBaseWidth();this.featuresG=this.seq_g.selectAll("g.location-group").data(this._data),this.locations=this.featuresG.enter().filter(t=>t.conservation_score>0).append("g").attr("class","location-group"),this.locations.append("path").attr("class","feature").attr("tooltip-trigger","true").attr("id",t=>"hsc_"+t.start).attr("fill","rgb(128, 128, 128)").on("mouseover",t=>{const e=this,r=d3.event,i=document.querySelectorAll("protvista-tooltip");i&&i[0]&&"click-open"===i[0].className||window.setTimeout((function(){const i={start:t.start,end:t.end,feature:{...t,type:"Sequence conservation"}};e.createTooltip(r,i)}),50),this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))}).on("mouseout",()=>{const t=this,e=document.querySelectorAll("protvista-tooltip");e&&e[0]&&"click-open"==e[0].className||window.setTimeout((function(){t.removeAllTooltips()}),50),t.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0})),t.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))}).on("click",t=>{const e={start:t.start,end:t.end,feature:{...t,type:"Sequence conservation"}};this.createTooltip(d3.event,e,!0),this.dispatchEvent(new CustomEvent("protvista-click",{detail:e,bubbles:!0,cancelable:!0}))})}refresh(){if(this.xScale&&this.seq_g){let t=this.getSingleBaseWidth();this.features=this.seq_g.selectAll("path.feature").data(this._data.filter(t=>t.conservation_score>0)),this.features.attr("d",e=>this.getFeatureShape(this._height,t,this._yScale(e.conservation_score))).attr("transform",t=>"translate("+this.getXFromSeqPosition(t.start)+",0)").attr("fill","rgb(128, 128, 128)"),this._updateHighlight()}}};i(18);var xi=class extends mi{constructor(){super()}connectedCallback(){super.connectedCallback(),this._accession=this.getAttribute("accession"),this._data=void 0,this._height=parseInt(this.getAttribute("height"))||430,document.addEventListener("sc-change",t=>{this.filterData(t.detail.type)})}set data(t){this._seqid=t[this._accession].seqId,this._data=t[this._accession].data,this.add_download_link(),this._createTrack()}add_download_link(){if(!this._seqid)return!1;this._seqid}_createTrack(){this._layoutObj.init(this._data),d3.select(this).selectAll("svg").remove(),this.svg=d3.select(this).append("div").append("svg").style("width","100%").attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0,-5)"),this._createFeatures(),this.refresh()}_createFeatures(){this._yScale=Object(a.scaleLinear)().domain([0,1]).range([0,400]),this._data.forEach(t=>{let e=20;t.amino.forEach(t=>{t.ypos=e,e+=this._yScale(t.probability)})})}refresh(){this.xScale&&this.seq_g&&(this.svg.selectAll("foreignObject").remove(),this.seq_g.selectAll("g.location-group").remove(),this.getSingleBaseWidth()<9.4?(this.foreign=this.svg.append("foreignObject").attr("width","100%").attr("height",this._height),this.commentdiv=this.foreign.append("xhtml:div").attr("class","zoomout").attr("style","text-align: center; height: "+this._height+"px"),this.span=this.commentdiv.append("span").attr("style","line-height:"+this._height+"px"),this.span.append("i").attr("class","icon icon-functional").attr("data-icon","3"),this.span.append("text").text("Please zoom in (until 150 or fewer residues are shown) to see the probabilities")):(this.featuresG=this.seq_g.selectAll("g.location-group").data(this._data),this.svg.attr("height",this._height),this.locations=this.featuresG.enter().filter(t=>t.start>this._displaystart-3&&t.start<this._displayend+3).append("g").attr("class","location-group").attr("height",this._height),this.aminorect=this.locations.selectAll(".aminogroup").data(t=>t.amino).enter().filter(t=>t.probability>0).append("g").attr("class","aminogroup").append("rect").attr("class","rectamino").style("fill",t=>t.color).attr("y",t=>t.ypos).attr("height",t=>this._yScale(t.probability)).attr("width",this.getSingleBaseWidth()).style("stroke-width","0.5").style("stroke","rgb(211,211,211)").attr("x",t=>this.getXFromSeqPosition(t.start)),this.locations.selectAll(".aminogroup").append("text").attr("class","textamino").attr("y",t=>t.ypos+(this._yScale(t.probability)/2+5)).attr("color","black").text(t=>t.oneLetterCode).attr("text-anchor","middle").attr("x",t=>this.getXFromSeqPosition(t.start)+this.getSingleBaseWidth()/2).attr("font-size",t=>this.adaptLabelFontSize(this.getSingleBaseWidth(),this._yScale(t.probability))),this.locations.on("mouseover",t=>{d3.event;this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))}).on("mouseout",()=>{this.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0}))}),this.aminorect.attr("tooltip-trigger","true").on("mouseover",t=>{const e=this,r=d3.event,i=document.querySelectorAll("protvista-tooltip");i&&i[0]&&"click-open"==i[0].className||window.setTimeout((function(){const i={start:t.start,end:t.end,feature:{...t,type:"Amino acid probability"}};e.createTooltip(r,i)}),50),this.dispatchEvent(new CustomEvent("protvista-mouseover",{detail:t,bubbles:!0,cancelable:!0}))}).on("mouseout",()=>{const t=this,e=document.querySelectorAll("protvista-tooltip");e&&e[0]&&"click-open"==e[0].className||window.setTimeout((function(){t.removeAllTooltips()}),50),this.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))}).on("click",t=>{const e={start:t.start,end:t.start,feature:{...t,type:"Sequence conservation"}};this.createTooltip(d3.event,e,!0),this.dispatchEvent(new CustomEvent("protvista-click",{detail:e,bubbles:!0,cancelable:!0}))})),this._updateHighlight())}adaptLabelFontSize(t,e){return 9.4>t||9.4>e?"0em":"10px"}filterData(t){"probability"==t?this._data.forEach(t=>{t.amino=t.amino.sort((function(t,e){return e.probability-t.probability}))}):this._data.forEach(t=>{t.amino=t.amino.sort((function(t,e){return t.color.localeCompare(e.color)}))}),this._createFeatures(),this.refresh()}disconnectedCallback(){super.disconnectedCallback(),this.manager&&this.manager.unregister(this),document.removeEventListener("sc-change")}};var wi=class extends mi{constructor(){super(),this._line=Object(a.line)().x(t=>this.xScale(t.x)).y(t=>this._yScale(t.y))}init(){this._totals_dataset={},this._totals_feature=void 0,this._disease_dataset={},this._disease_feature=void 0}connectedCallback(){super.connectedCallback(),this._data=void 0,this._height=parseInt(this.getAttribute("height"))||40,this._yScale=Object(a.scaleLinear)(),this._xExtent,this._yExtent,this.init()}set data(t){if(this._data=t,this.init(),this._data.variants.length<=0)return;let e={},r={};this._data.variants.forEach(t=>{void 0===e[t.start]&&(e[t.start]=0),void 0===r[t.start]&&(r[t.start]=0),e[t.start]++,void 0!==t.association&&t.association.forEach(e=>{!0===e.disease&&r[t.start]++})}),this._totals_dataset=Object.keys(e).map(t=>({x:t,y:e[t]})),this._disease_dataset=Object.keys(r).map(t=>({x:t,y:r[t]})),this._createTrack()}_createTrack(){Object(a.select)(this).selectAll("svg").remove(),this.svg=Object(a.select)(this).append("svg").style("width","100%").attr("height",50),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("stroke","black").attr("height",50),this._createFeatures(),this.refresh()}_createFeatures(){this._xExtent=Object(a.extent)(this._totals_dataset,t=>parseInt(t.x)),this._yExtent=Object(a.extent)(this._totals_dataset,t=>t.y),this._yExtent[1]+=2,this.xScale.domain(this._xExtent).range([0,this._width]),this._yScale.domain(this._yExtent).range([this._height,0])}refresh(){this.svg&&(this.svg.selectAll("path").remove(),this._disease_feature=this.svg.append("path").attr("d",this._line(this._disease_dataset)).attr("fill","none").attr("stroke","red").attr("stroke-width","1.5px").attr("stroke-dasharray","0").attr("transform","translate(0,0)"),this._totals_feature=this.svg.append("path").attr("d",this._line(this._totals_dataset)).attr("fill","none").attr("stroke","darkgrey").attr("stroke-width","1px").attr("stroke-dasharray",".5").attr("transform","translate(0,0)"),this._updateHighlight())}};var ki=function(t){const{variants:e,sequence:r}=t;if(!r||!e)return;const i=[],n=r.split("");for(let t in n)i.push({type:"VARIANT",normal:n[t],pos:t+1,variants:[]});return e.forEach(t=>{i[t.start-1]&&i[t.start-1].variants.push(t)}),i};var Si=class{constructor(){this._frequency=Object(a.scalePow)().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}drawVariationPlot(t,e){const r=e.getSingleBaseWidth()/2;t.each((t,i,n)=>{const s=Object(a.select)(n[i]),o=t.filter(t=>0!==t.variants.length),l=s.selectAll("g").data(o,t=>t.pos);l.exit().remove();const c=l.enter().append("g").merge(l).selectAll("circle").data(t=>t.variants);c.exit().remove(),c.enter().append("circle").merge(c).attr("class",(function(t){})).attr("title",t=>t.start).attr("r",t=>t.size?t.size:5).attr("cx",t=>e.getXFromSeqPosition(t.start)+r).attr("cy",t=>e._yScale(t.variant.charAt(0))).attr("name",t=>{let e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId="var_"+t.wildType+t.start+e,t.internalId}).attr("fill",t=>t.color).attr("tooltip-trigger","true").on("mouseover",t=>{const r=d3.event,i=document.querySelectorAll("protvista-tooltip");i&&i[0]&&"click-open"==i[0].className||window.setTimeout((function(){const i={start:t.start,end:t.end,feature:{...t,type:"Variant"}};e.createTooltip(r,i)}),50),e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0})),e.dispatchEvent(new CustomEvent("protvista-mouseover",{detail:t,bubbles:!0,cancelable:!0}))}).on("mouseout",()=>{const t=document.querySelectorAll("protvista-tooltip");t&&t[0]&&"click-open"==t[0].className||window.setTimeout((function(){e.removeAllTooltips()}),50),e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0})),e.dispatchEvent(new CustomEvent("protvista-mouseout",{detail:null,bubbles:!0,cancelable:!0}))}).on("click",t=>{const r={start:t.start,end:t.end,feature:{...t,type:"Variant"}};e.createTooltip(a.event,r,!0),e.dispatchEvent(new CustomEvent("protvista-click",{detail:r,bubbles:!0,cancelable:!0}))})})}},Ei=(i(24),Object.prototype.hasOwnProperty);var Ai=function(t,e,r){var i=t[e];Ei.call(t,e)&&Ct(i,r)&&(void 0!==r||e in t)||Z(t,e,r)};var Ci=function(t,e,r,i){var n=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=i?i(r[o],t[o],o,r,t):void 0;void 0===l&&(l=t[o]),n?Z(r,o,l):Ai(r,o,l)}return r};var ji=function(t,e){return t&&Ci(e,wt(e),t)};var Ti=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Li=Object.prototype.hasOwnProperty;var Oi=function(t){if(!j(t))return Ti(t);var e=vt(t),r=[];for(var i in t)("constructor"!=i||!e&&Li.call(t,i))&&r.push(i);return r};var Di=function(t){return xt(t)?gt(t,!0):Oi(t)};var Pi=function(t,e){return t&&Ci(e,Di(e),t)},Ii=i(13);var Mi=function(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e};var qi=function(t,e){return Ci(t,je(t),e)},Fi=bt(Object.getPrototypeOf,Object),$i=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)we(e,je(t)),t=Fi(t);return e}:Ee;var Ni=function(t,e){return Ci(t,$i(t),e)};var Ri=function(t){return ke(t,Di,$i)},zi=Object.prototype.hasOwnProperty;var Hi=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&zi.call(t,"index")&&(r.index=t.index,r.input=t.input),r};var Bi=function(t){var e=new t.constructor(t.byteLength);return new ve(e).set(new ve(t)),e};var Wi=function(t,e){var r=e?Bi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Vi=/\w*$/;var Zi=function(t){var e=new t.constructor(t.source,Vi.exec(t));return e.lastIndex=t.lastIndex,e},Ui=y?y.prototype:void 0,Gi=Ui?Ui.valueOf:void 0;var Xi=function(t){return Gi?Object(Gi.call(t)):{}};var Ji=function(t,e){var r=e?Bi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Yi=function(t,e,r){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return Bi(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return Wi(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ji(t,r);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return Zi(t);case"[object Set]":return new i;case"[object Symbol]":return Xi(t)}},Qi=Object.create,Ki=function(){function t(){}return function(e){if(!j(e))return{};if(Qi)return Qi(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var tn=function(t){return"function"!=typeof t.constructor||vt(t)?{}:Ki(Fi(t))};var en=function(t){return J(t)&&"[object Map]"==He(t)},rn=ht.a&&ht.a.isMap,nn=rn?ct(rn):en;var sn=function(t){return J(t)&&"[object Set]"==He(t)},an=ht.a&&ht.a.isSet,on=an?ct(an):sn,ln={};ln["[object Arguments]"]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object DataView]"]=ln["[object Boolean]"]=ln["[object Date]"]=ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Map]"]=ln["[object Number]"]=ln["[object Object]"]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object Symbol]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Error]"]=ln["[object Function]"]=ln["[object WeakMap]"]=!1;var cn=function t(e,r,i,n,s,a){var o,l=1&r,c=2&r,h=4&r;if(i&&(o=s?i(e,n,s,a):i(e)),void 0!==o)return o;if(!j(e))return e;var p=rt(e);if(p){if(o=Hi(e),!l)return Mi(e,o)}else{var u=He(e),d="[object Function]"==u||"[object GeneratorFunction]"==u;if(Object(it.a)(e))return Object(Ii.a)(e,l);if("[object Object]"==u||"[object Arguments]"==u||d&&!s){if(o=c||d?{}:tn(e),!l)return c?Ni(e,Pi(o,e)):qi(e,ji(o,e))}else{if(!ln[u])return s?e:{};o=Yi(e,u,l)}}a||(a=new le);var g=a.get(e);if(g)return g;a.set(e,o),on(e)?e.forEach((function(n){o.add(t(n,r,i,n,e,a))})):nn(e)&&e.forEach((function(n,s){o.set(s,t(n,r,i,s,e,a))}));var f=h?c?Ri:Te:c?keysIn:wt,v=p?void 0:f(e);return si(v||e,(function(n,s){v&&(n=e[s=n]),Ai(o,s,t(n,r,i,s,e,a))})),o};var hn=function(t){return cn(t,5)},pn=y?y.isConcatSpreadable:void 0;var un=function(t){return rt(t)||et(t)||!!(pn&&t&&t[pn])};var dn=function t(e,r,i,n,s){var a=-1,o=e.length;for(i||(i=un),s||(s=[]);++a<o;){var l=e[a];r>0&&i(l)?r>1?t(l,r-1,i,n,s):we(s,l):n||(s[s.length]=l)}return s};var gn=function(t){return(null==t?0:t.length)?dn(t,1):[]};var fn=function(t,e){return!!(null==t?0:t.length)&&Wr(t,e,0)>-1};var vn=function(t,e,r){for(var i=-1,n=null==t?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1};var bn=function(){},yn=Ie&&1/ye(new Ie([,-0]))[1]==1/0?function(t){return new Ie(t)}:bn;var mn=function(t,e,r){var i=-1,n=fn,s=t.length,a=!0,o=[],l=o;if(r)a=!1,n=vn;else if(s>=200){var c=e?null:yn(t);if(c)return ye(c);a=!1,n=ge,l=new ue}else l=e?[]:o;t:for(;++i<s;){var h=t[i],p=e?e(h):h;if(h=r||0!==h?h:0,a&&p==p){for(var u=l.length;u--;)if(l[u]===p)continue t;e&&l.push(p),o.push(h)}else n(l,p,r)||(l!==o&&l.push(p),o.push(h))}return o};var _n=function(t,e){return t&&t.length?mn(t,kr(e,2)):[]};var xn=function(t,e){return t&&kt(t,ai(e))},wn=Math.min;var kn=function(t,e,r){for(var i=r?vn:fn,n=t[0].length,s=t.length,a=s,o=Array(s),l=1/0,c=[];a--;){var h=t[a];a&&e&&(h=ar(h,ct(e))),l=wn(h.length,l),o[a]=!r&&(e||n>=120&&h.length>=120)?new ue(a&&h):void 0}h=t[0];var p=-1,u=o[0];t:for(;++p<n&&c.length<l;){var d=h[p],g=e?e(d):d;if(d=r||0!==d?d:0,!(u?ge(u,g):i(c,g,r))){for(a=s;--a;){var f=o[a];if(!(f?ge(f,g):i(t[a],g,r)))continue t}u&&u.push(g),c.push(d)}}return c};var Sn=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},En=Math.max;var An=function(t,e,r){return e=En(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,s=En(i.length-e,0),a=Array(s);++n<s;)a[n]=i[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=i[n];return o[e]=r(a),Sn(t,this,o)}};var Cn=function(t){return function(){return t}},jn=V?function(t,e){return V(t,"toString",{configurable:!0,enumerable:!1,value:Cn(e),writable:!0})}:mr,Tn=Date.now;var Ln=function(t){var e=0,r=0;return function(){var i=Tn(),n=16-(i-r);if(r=i,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(jn);var On=function(t){return J(t)&&xt(t)};var Dn=function(t){return On(t)?t:[]};var Pn=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},In=function(t,e){return Ln(An(t,e,mr),t+"")}((function(t){var e=Pn(t),r=ar(t,Dn);return e===Pn(r)?e=void 0:r.pop(),r.length&&r[0]===t[0]?kn(r,kr(e,2)):[]}));const Mn={disease:"likely_disease",predicted:"predicted",nonDisease:"likely_benign",uncertain:"uncertain",UniProt:"uniprot_reviewed",ClinVar:"clinvar_reviewed",LSS:"large_scale_studies",FoldX:"foldx",PDB:"pdb"},qn=(t,e)=>((t,e=[])=>{const r=hn(e)||[],i=Mn[t];return r.filter(t=>t.keywords&&t.keywords.indexOf(i)>-1)})(t,e),Fn=(t,e,r,i)=>{const{sequence:n,variants:s}=i;if(!(r=r.trim()))return{sequence:n,variants:s};const a=r.split(","),o=Ar(a,t=>t.split(":")[0]);let l=[];return xn(o,t=>{const e=((t,e,r)=>_n(gn(e.map(t=>t.split(":")[1]).map(e=>qn(e,t))),t=>t[r]))(s,t,"accession");l.push(e)}),l=gn(In(...l,t=>t.accession)),l=_n(l,"accession"),{sequence:n,variants:l}};var $n=[{name:"disease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely disease"],colors:["#990000"]}},{name:"predicted",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Predicted deleterious","Predicted benign"],colors:["#002594","#8FE3FF"]}},{name:"nonDisease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely benign"],colors:["#99cc00"]}},{name:"uncertain",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Uncertain"],colors:["#009e73"]}},{name:"UniProt",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["UniProt reviewed"],colors:["#e5e5e5"]}},{name:"ClinVar",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["ClinVar reviewed"],colors:["#e5e5e5"]}},{name:"LSS",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Large scale studies"],colors:["#e5e5e5"]}},{name:"FoldX",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["FoldX analysis"],colors:["#e5e5e5"]}},{name:"PDB",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Observed in PDB"],colors:["#e5e5e5"]}}];const Nn=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"];var Rn=class extends mi{connectedCallback(){super.connectedCallback(),this._accession=this.getAttribute("accession"),this._height=parseInt(this.getAttribute("height"))?parseInt(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Object(a.scaleLinear)(),this._yScale=Object(a.scalePoint)().domain(Nn).range([0,this._height-this.margin.top-this.margin.bottom])}static get observedAttributes(){return super.observedAttributes.concat("activefilters")}attributeChangedCallback(t,e,r){if(e!==r&&"activefilters"==t)this.data=Fn(0,0,r,this._completeDataSet);else if(super.attributeChangedCallback(t,e,r),!super.svg)return}_fireEvent(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}))}set data(t){void 0===this._completeDataSet&&(this._completeDataSet=t),this._data=ki(t),this._createTrack()}_createFeatures(){this._variationPlot=new Si;const t=super.svg.select("g.sequence-features");this._axisLeft=t.append("g"),this._axisRight=t.append("g");const e=t.append("g").attr("clip-path","url(#plotAreaClip)");let r=this.getWidthWithMargins();if(0==r)try{r=this.parentElement.parentElement.parentElement.previousElementSibling.lastElementChild.clientWidth}catch(t){}this._clipPath=t.append("clipPath").attr("id","plotAreaClip").append("rect").attr("width","100%").attr("height",this._height).attr("transform",`translate(0, -${this.margin.top})`),this._series=e.datum(this._data),this.updateScale()}refresh(){this._series&&(this._clipPath.style("width","100%"),this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}updateScale(){this._yAxisLScale=Object(a.axisLeft)().scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=Object(a.axisRight)().scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform",`translate(${this.margin.left},0)`).call(this._yAxisLScale),this._axisRight.attr("transform",`translate(${this.getWidthWithMargins()-this.margin.right+10}, 0)`).attr("class","variation-y-right axis").call(this._yAxisRScale)}updateData(t){this._series&&this._series.datum(t)}reset(){}};class zn extends HTMLElement{constructor(){super(),this._top=parseInt(this.getAttribute("top")),this._left=parseInt(this.getAttribute("left")),this._content=this.getAttribute("content"),this._title=this.getAttribute("title"),this._mirror=void 0}set top(t){this._top=t}get top(){return this._top}set left(t){this._left=t}get left(){return this._left}set content(t){this._content=t}get content(){return this._content}set title(t){this._title=t}get title(){return this._title}set closeable(t){t?this.setAttribute("closeable",""):this.removeAttribute("closeable")}get closeable(){return this.hasAttribute("closeable")}get mirror(){return this._mirror}set mirror(t){this.setAttribute("mirror",t)}static get observedAttributes(){return["top","left","mirror"]}attributeChangedCallback(t,e,r){e!=r&&("top"===t||"left"===t?(this["_"+t]=this.getAttribute(t),this._updatePosition()):this.render())}connectedCallback(){this.render(),document.getElementsByTagName("body")[0].addEventListener("click",t=>{this.hasTooltipParent(t.target)&&!t.target.classList.contains("tooltip-close")||null!==t.target.getAttribute("tooltip-trigger")||this.remove()})}hasTooltipParent(t){return!(!t.parentElement||"body"===t.parentElement.tagName)&&("PROTVISTA-TOOLTIP"===t.parentElement.tagName||this.hasTooltipParent(t.parentElement))}_updatePosition(){this.style.top=this._top+"px",this.style.left=this._left+"px"}render(){this._updatePosition(),void 0!==this.mirror&&(this.mirror=this.mirror);let t=`<div class="tooltip-header"><span class="tooltip-header-title">${this._title}</span>`;this.closeable&&(t+='<span class="tooltip-close" style="float:right"></span>'),t=`${t}</div><div class="tooltip-body">${this._content}</div>`,this.innerHTML=t}}var Hn=zn;i(26);const{html:Bn}=i(1);var Wn=function(t){return Bn`<div class="protvistaRow">
                    
        <!-- Top Menu Toolbar -->
        <div class="protvistaCol1 protvistaToolbar" style="position:relative">
            <span class="protvistaToolbarIcon" @click=${e=>t.layoutHelper.resetView()} title="Reset view">
                <i class="icon icon-functional" data-icon="R"></i>
            </span>

            <!-- View / highlight menu -->
            <span class="protvistaToolbarIcon" title="View / highlight region" @click=${e=>t.layoutHelper.openRangeMenu()}>
                <i class="icon icon-generic" data-icon="["></i>
            </span>
            <div class="rangeMenu viewMenuBox" style="display:none">
                <div class="protvistaRangeMenuTitle">
                    <div>View region</div>
                    <span class="icon icon-functional protvistaMenuClose" data-icon="x" title="close" @click=${e=>{e.stopPropagation(),t.layoutHelper.openRangeMenu()}}></span>
                </div>
                <div class="protvistaForm rangeForm" style="width:170px;">
                    <div style="float:left;width:48%;">
                        From <br>
                        <input type="number" class="pvRangeMenuStart" value="0" style="display:inline-block;margin:0;" min="1" max="${t.viewerData.length}" step="1" />
                    </div>
                    <div style="float:right;width:48%;">
                        To <br>
                        <input type="number" class="pvRangeMenuEnd" value="0" style="display:inline-block;margin:0;" min="1" max="${t.viewerData.length}" step="1" /> <br><br>
                    </div>
                    <div style="margin:0 0 10px 0;clear:both;">
                        <input type="checkbox" class="pvRangeMenuHighlight" /> highlight-only
                    </div>                                
                    <button class="button tiny" style="margin:0; letter-spacing: 1px;" @click=${e=>t.layoutHelper.pvRangeMenuSubmit()}>Submit</button>
                </div>
            </div>
            <!-- View / highlight menu -->

            <!-- Track categories settings menu -->
            <span class="protvistaToolbarIcon" title="Hide sections" @click=${e=>t.layoutHelper.openCategorySettingsMenu()}>
                <i class="icon icon-functional" data-icon="M"></i>
            </span>
            <div class="settingsMenu viewMenuBox" style="display:none">
                <div class="protvistaRangeMenuTitle">
                    <div>Hide sections</div>
                    <span class="icon icon-functional protvistaMenuClose" data-icon="x" title="close" @click=${e=>{e.stopPropagation(),t.layoutHelper.openCategorySettingsMenu()}}></span>
                </div>
                <div class="protvistaForm rangeForm" style="width:215px;max-height:400px;">
                    <table style="font-size:inherit;margin-bottom:0" class="pvHideOptionsTable">
                        <tbody>
                        ${t.viewerData.tracks.map((t,e)=>Bn`
                            <tr>
                            <td style="width:10%;vertical-align:top;">
                                <input type="checkbox" class="pvSectionChkBox" name="cb_${e}" style="margin:0" />
                            </td>
                            <td style="padding-bottom:5px;">
                                ${t.label}
                            </td>
                            </tr>
                        `)}
                        <tr style="display:none" class="scOption"></tr>
                        <tr style="display:none" class="variationOption"></tr>
                        </tbody>
                    </table>
                    <br>
                    <button class="button tiny" style="margin:0; letter-spacing: 1px;" @click=${e=>t.layoutHelper.pvCategorySettingsMenuSubmit()}>Submit</button>
                </div>
            </div>
            <!-- Track categories settings menu -->
        </div>

        <!-- Navigation Component -->
        <div class="protvistaCol2 pvNavSection">
            <protvista-pdb-navigation length="${t.viewerData.length}" offset="${t.viewerData.offset}" ></protvista-pdb-navigation>
        </div>

    </div>`};const{html:Vn}=i(1);var Zn=function(t){return Vn`<div class="protvistaRow">
                    
        <!-- Top Menu Toolbar -->
        <div class="protvistaCol1">&nbsp;</div>

        <!-- Navigation Component -->
        <div class="protvistaCol2 pvSeqSection">
            <protvista-sequence length="${t.viewerData.length}" sequence="${t.viewerData.sequence}"></protvista-sequence>
        </div>

    </div>`};
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const Un=new WeakMap,Gn=new WeakMap,Xn=Object(v.directive)(t=>e=>{if(!(e instanceof v.AttributePart)||e instanceof v.PropertyPart||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");Gn.has(e)||(e.committer.element.style.cssText=e.committer.strings.join(" "),Gn.set(e,!0));const r=e.committer.element.style,i=Un.get(e);for(const e in i)e in t||(-1===e.indexOf("-")?r[e]=null:r.removeProperty(e));for(const e in t)-1===e.indexOf("-")?r[e]=t[e]:r.setProperty(e,t[e]);Un.set(e,t)}),{html:Jn}=i(1);var Yn=function(t){return Jn`${t.viewerData.tracks.map((e,r)=>Jn`
        <div class="protvistaRow pvTrackRow pvTracks_${r}">
            <div class="protvistaCol1 category-label" data-label-index="${r}" @click=${e=>t.layoutHelper.showSubtracks(r)} 
            style=${Xn(e.labelColor?{backgroundColor:e.labelColor,borderBottom:"1px solid lightgrey"}:{})}>
                <span class="pvTrackLabel_${r}"></span>
                <span class="protvistaResetSectionIcon pvResetSection_${r}" @click=${e=>{e.stopPropagation(),t.layoutHelper.resetSection(r)}} title="Reset section">
                <i class="icon icon-functional" data-icon="R"></i>
                </span>
            </div>
            <div class="protvistaCol2 aggregate-track-content" style=${Xn(e.labelColor?{borderBottom:"1px solid lightgrey"}:{})}>
                <protvista-pdb-track class="pvTrack" length="${t.viewerData.length}" layout="${t.layoutHelper.getTrackLayout(e.overlapping)}" height="${t.layoutHelper.getTrackHeight(e.length,e.overlapping)}"></protvista-pdb-track>
            </div>
        </div>
        <!-- Subtrack Rows Start -->
        <div class="protvistaRowGroup pvSubtracks_${r}">
            ${e.data.map((i,n)=>Jn`
                <div class="protvistaRow pvSubtrackRow_${r}_${n}">
                    <div class="protvistaCol1 track-label" style=${Xn(i.labelColor?{backgroundColor:i.labelColor,borderBottom:"1px solid lightgrey"}:{})}
                    @mouseover=${e=>{e.stopPropagation(),t.layoutHelper.showLabelTooltip(e)}} @mouseout=${e=>{e.stopPropagation(),t.layoutHelper.hideLabelTooltip()}}>
                        <span class="icon icon-functional hideLabelIcon" data-icon="x" @click=${e=>{e.stopPropagation(),t.layoutHelper.hideSubTrack(r,n)}} 
                        title="Hide this section"></span> 
                        <div class="pvSubtrackLabel_${r}_${n}" style="word-break: break-all;"></div>
                        <span class="icon icon-functional labelZoomIcon pvZoomIcon_${r}_${n}" data-icon="T" @click="${e=>{t.layoutHelper.zoomTrack({start:1,end:null,trackData:i},r+"_"+n)}}
                        title="Click to zoom-out this section"></span>

                        ${i.labelTooltip?Jn`
                            <span class="labelTooltipContent" style="display:none;">${i.labelTooltip}</span>
                        `:""}
                    </div>
                    <div class="protvistaCol2 track-content" style=${Xn(e.labelColor?{borderBottom:"1px solid lightgrey"}:{})}>
                        <protvista-pdb-track class="pvSubtrack_${r}" length="${t.viewerData.length}" layout="${t.layoutHelper.getTrackLayout(i.overlapping)}" height="${t.layoutHelper.getTrackHeight(i.length,i.overlapping)}"></protvista-pdb-track>
                    </div>
                </div>`)}
        </div>
        <!-- Subrack Rows End -->
    `)}`};const{html:Qn}=i(1);var Kn=function(t){return Qn`<div class="protvistaRow pvConsHistoRow" style="display:none">
                    
                    <div class="protvistaCol1 category-label" @click=${e=>t.layoutHelper.showConservationPlot()} style="background-color:rgb(128,128,128); borderBottom:1px solid lightgrey">Sequence conservation</div>

                    <div class="protvistaCol2 aggregate-track-content pvConservationHistoSection">
                        <protvista-pdb-sc-histogram accession="${t._entryId?t._entryId:t._accession}" length="${t.viewerData.length}"></protvista-pdb-sc-histogram>
                    </div>
                </div>
                <div class="pvConservationPlotRow" style="display:none">
                    <div class="protvistaRow">
                        <div class="protvistaCol1 track-label" style="background-color:rgb(211,211,211); borderBottom:1px solid lightgrey">
                            <div style="height:30px;"><b>Amino acid probabilities</b></div>
                            <div class="control" style="height:90px;">
                                <p>Data displayed by</p>
                                <div>
                                    <label class="legendText">
                                        <input type="radio" class="sc_radio" name="sc_display_radio" value="probability" checked @change=${e=>t.layoutHelper.filterSc("probability")}>Probability
                                    </label>
                                </div>
                                <div>
                                    <label class="legendText">
                                        <input type="radio" class="sc_radio" name="sc_display_radio" value="property" @change=${e=>t.layoutHelper.filterSc("property")}>Property
                                    </label>
                                </div>
                            </div>

                            <div class="legend" style="height:200px;">
                                <p>Amino acid properties</p>
                                <div class="protvista-sc-legend">
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#15a4a4"></span>
                                        <span class="legendText">Aromatic</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#15c015"></span>
                                        <span class="legendText">Polar</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#80a0f0"></span>
                                        <span class="legendText">Hydrophobic</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#c048c0"></span>
                                        <span class="legendText">Negative charge</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#c0c000"></span>
                                        <span class="legendText">Proline</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#f01505"></span>
                                        <span class="legendText">Positive charge</span>
                                    </div>
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#f08080"></span>
                                        <span class="legendText">Cysteine</span>
                                    </div>                                  
                                    <div class="protvista-sc-legend">
                                        <span class="legendColor" style="background:#f09048"></span>
                                        <span class="legendText">Glycine</span>
                                    </div>
                                </div>
                            </div>

                            <div class="download-sc-align">
                            </div>
                        </div>

                        <div class="protvistaCol2 track-content pvConservationPlotSection">
                            <protvista-pdb-seq-consevation accession="${t._entryId?t._entryId:t._accession}" length="${t.viewerData.length}"></protvista-pdb-seq-consevation>
                        </div>
                    </div>
                </div>`};const{html:ts}=i(1);var es=function(t){return ts`<div class="protvistaRow pvVariantGraphRow" style="display:none">
                    
                    <div class="protvistaCol1 category-label" @click=${e=>t.layoutHelper.showVariantPlot()}>Variants</div>

                    <div class="protvistaCol2 aggregate-track-content pvVariantGraphSection">
                        <protvista-pdb-variation-graph length="${t.viewerData.length}"></protvista-pdb-variation-graph>
                    </div>
                </div>

                <div class="pvVariantPlotRow" style="display:none">

                    <div class="protvistaRow">
                        
                        <div class="protvistaCol1 track-label">
                            <protvista-filter filters='${t.variantFilterAttr}'></protvista-filter>
                        </div>

                        <div class="protvistaCol2 track-content pvVariantPlotSection">
                            <protvista-pdb-variation length="${t.viewerData.length}"></protvista-pdb-variation>
                        </div>
                    </div>

                </div>`};const{html:rs}=i(1);var is=function(t){return rs`<div></div>
                <div>
                    ${Object.keys(t.viewerData.legends.data).map(e=>rs`
                            <div class="legendRow" style=${Xn({textAlign:t.viewerData.legends.alignment})}>
                                ${isNaN(parseInt(e))?rs`<span class="legendText"><strong>${e} : </strong></span>`:""}
                                ${t.viewerData.legends.data[e].map(t=>{Array.isArray(t.color)||(t.color=[t.color]);const e=t.color.length,r=100/e;let i="";if(1==e)i="background:"+t.color[0];else{let n=["to right"];t.color.forEach((t,i)=>{0==i?n.push(t+" "+r+"%"):i==e-1?n.push(t+" "+(r*i-1)+"%"):n.push(t+" "+r*i+"% "+r*(i+1)+"%")}),i="background:linear-gradient("+n.join(", ")+")"}return rs`
                                    <span class="legendColor" style="${i}"></span>
                                    <span class="legendText">${t.text}</span>
                                `})}
                            </div>
                            `)}
                </div>`};var ns=class{constructor(t,e,r,i,n){this.appUrlEnv=t||(new RegExp("wwwdev").test(window.location.href)?"dev":new RegExp("wwwint").test(window.location.href)?"int":""),this.accession=e,this.entryId=r,this.entityId=i,this.pageSection=n,this.viewerData={displayNavigation:!0,displaySequence:!0,displayLabels:!0,displayConservation:!0,displayVariants:!0,sequence:void 0,length:void 0,tracks:[],legends:{alignment:"right",data:{}}}}getPDBePVApiUrls(){let t={uniport:[`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/unipdb/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/domains/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/secondary_structures/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/ligand_sites/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/interface_residues/${this.accession}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/protvista/annotations/${this.accession}`],entry:[`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/uniprot_mapping/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/chains/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/domains/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/rfam/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/secondary_structure/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/binding_sites/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/interfaces/${this.entryId}/${this.entityId}`,`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/pdbe_pages/protvista/annotations/${this.entryId}/${this.entityId}`]},e=[];return this.accession?e=t.uniport:this.entryId&&this.entityId&&!this.pageSection?e=t.entry:this.entryId&&this.entityId&&this.pageSection&&(e="2"===this.pageSection?[t.entry.pop()]:t.entry.slice(0,-1)),e}async processMutlplePDBeApiData(){let t=this.getPDBePVApiUrls();return await Promise.all(t.map(t=>fetch(t))).then(t=>Promise.all(t.map(t=>t.json()))).then(e=>{e.forEach((e,r)=>{if(void 0===e||null==e||0===Object.keys(e).length);else{let i=this.entryId?this.entryId:this.accession;if(t[r].split("/").indexOf("uniprot_mapping")>-1&&e[i].tracks&&1==e[i].tracks.length&&(this.accession=e[i].tracks[0].data[0].label),!e[i])return;if(e[i].displayNavigation&&0==e[i].displayNavigation&&(this.viewerData.displayNavigation=!1),e[i].displaySequence&&0==e[i].displaySequence&&(this.viewerData.displaySequence=!1),e[i].displayLabels&&0==e[i].displayLabels&&(this.viewerData.displayLabels=!1),e[i].sequence&&(this.viewerData.sequence=e[i].sequence),e[i].length&&(this.viewerData.length=e[i].length),e[i].tracks&&(this.viewerData.tracks=this.viewerData.tracks.concat(e[i].tracks)),e[i].legends&&(e[i].legends.alignment&&(this.viewerData.legends.alignment=e[i].legends.alignment),e[i].legends.data))for(let t in e[i].legends.data)this.viewerData.legends.data[t]=e[i].legends.data[t]}})},t=>{console.log("API unavailable!",e)}),this.viewerData}async getPDBeApiDataByName(t){try{let e=`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/uniprot/${"sequence_conservation"===t?"":"protvista/"}${t}/${this.accession}`;return this.entryId&&this.entityId&&(e=`https://www${this.appUrlEnv}.ebi.ac.uk/pdbe/graph-api/${"sequence_conservation"===t?"pdb":"pdbe_pages/protvista"}/${t}/${this.entryId}/${this.entityId}`),await(await fetch(e)).json()}catch(e){console.log(`API ${t} unavailable!`,e)}}};var ss=class{constructor(t){this.ctx=t}postProcessLayout(){this.getScrollbarWidth();let t=this.ctx.querySelectorAll(".pvNavSection")[0];t&&(t.style.paddingRight=this.ctx.scrollbarWidth+"px",setTimeout(()=>{let t=this.ctx.querySelectorAll("protvista-navigation")[0];t&&(t.firstElementChild.firstElementChild.style.width="100%")},100));let e=this.ctx.querySelectorAll(".pvSeqSection")[0];e&&(e.style.paddingRight=this.ctx.scrollbarWidth+"px",setTimeout(()=>{let t=this.ctx.querySelectorAll("protvista-sequence")[0];t&&(t.firstElementChild.firstElementChild.style.width="100%")},100));let r=this.ctx.querySelectorAll(".pvLineGraphSection")[0];r&&(r.style.paddingRight=this.ctx.scrollbarWidth+"px"),this.bindTrackData("track",void 0,this.ctx.scrollbarWidth),this.ctx.viewerData.displayVariants&&this.ctx.dataHelper.getPDBeApiDataByName("variation").then(t=>{const e={key:"variationOption",index:this.ctx.viewerData.tracks.length+1,label:"Variation"};this.addDynamicTrackSection(t,".pvVariantGraphRow",".pvVariantGraphSection",".pvVariantPlotSection",e)}),this.ctx.viewerData.displayConservation&&this.ctx.dataHelper.getPDBeApiDataByName("sequence_conservation").then(t=>{const e={key:"scOption",index:this.ctx.viewerData.tracks.length,label:"Sequence conservation"};this.addDynamicTrackSection(t,".pvConsHistoRow",".pvConservationHistoSection",".pvConservationPlotSection",e,!0)}),this.ctx.subscribeEvents&&this.addEventSubscription()}addDynamicTrackSection(t,e,r,i,n,s){if(t&&Object.keys(t).length>0){this.ctx.querySelector(e).style.display="table";let a=this.ctx.querySelectorAll(r)[0];a&&(a.style.paddingRight=this.ctx.scrollbarWidth+"px",s&&(a.style.borderBottom="1px solid lightgrey"),a.firstElementChild.data=t);let o=this.ctx.querySelectorAll(i)[0];o&&(o.style.paddingRight=this.ctx.scrollbarWidth+"px",s&&(o.style.borderBottom="1px solid lightgrey"),o.firstElementChild.data=t),this.addHideOptions(n.key,n.index,n.label)}}getScrollbarWidth(){let t=this.ctx.querySelectorAll(".divWithScroll")[0],e=this.ctx.querySelectorAll(".divWithoutScroll")[0];this.ctx.scrollbarWidth=e.clientWidth-t.clientWidth,t.remove(),e.remove()}getTrackLayout(t){return t?"overlapping":"non-overlapping"}getTrackHeight(t,e){return t>1?60:44}showSubtracks(t){let e=this.ctx.querySelectorAll(".pvSubtracks_"+t)[0],r=this.ctx.querySelectorAll(".pvTracks_"+t)[0];r.classList.contains("expanded")?(e.style.display="none",r.querySelectorAll(".pvTrack")[0].style.display="block",r.classList.remove("expanded")):(r.querySelectorAll(".pvTrack")[0].style.display="none",e.style.display="block",-1==this.ctx.formattedSubTracks.indexOf(t)&&(this.bindTrackData("subtrack",t,this.ctx.scrollbarWidth),this.ctx.formattedSubTracks.push(t)),r.classList.add("expanded"))}hideSubtracks(t){this.ctx.querySelectorAll(".pvSubtracks_"+t)[0].style.display="none",this.ctx.querySelectorAll(".pvTracks_"+t)[0].style.display="table"}addHideOptions(t,e,r){let i=this.ctx.querySelector("."+t);i.innerHTML=`<tr>\n            <td style="width:10%;vertical-align:top;"><input type="checkbox" class="pvSectionChkBox" name="cb_${e}" style="margin:0" /></td>\n            <td style="padding-bottom:5px;">${r}</td>\n        </tr>`,i.style.display="table-row"}handleExtEvents(t){if(void 0!==t.eventData&&void 0!==t.eventData.residueNumber){let e={start:t.eventData.residueNumber,end:t.eventData.residueNumber,highlight:!0};this.resetZoom(e)}}bindTrackData(t,e,r){let i=".pvTrack";"subtrack"==t&&(i=".pvSubtrack_"+e);let n=this.ctx.querySelectorAll(i);n&&n.length>0&&n.forEach((i,n)=>{let s=this.ctx.viewerData.tracks[n],a=".pvTrackLabel_"+n;"subtrack"==t&&(a=".pvSubtrackLabel_"+e+"_"+n,s=this.ctx.viewerData.tracks[e].data[n]);let o=this.getLabel(s.labelType,s.label);this.ctx.querySelectorAll(a)[0].innerHTML=o;let l="",c=s.data;"subtrack"==t&&(c=[s],l="transform:translate(0px,-5px)"),i.data=c,"subtrack"==t&&this.ctx.viewerData.tracks[e].data.length>4?i.parentNode.style.paddingRight="0px":i.parentNode.style.paddingRight=r+"px","track"==t&&0==n&&(this.ctx.querySelectorAll(".pvTracks_0")[0].classList.add("expanded"),this.ctx.querySelectorAll(".pvTracks_0")[0].querySelectorAll(".pvTrack")[0].style.display="none",this.ctx.querySelectorAll(".pvSubtracks_0")[0].style.display="block",this.bindTrackData("subtrack",0,r),this.ctx.formattedSubTracks.push(n))})}getLabel(t,e){if("pdbIcons"!==t)return e;{let t={experiments:{class:"icon icon-generic",dataIcon:";"},complex:{class:"icon icon-conceptual",dataIcon:"y"},nucleicAcids:{class:"icon icon-conceptual",dataIcon:"d"},ligands:{class:"icon icon-conceptual",dataIcon:"b"},literature:{class:"icon icon-generic",dataIcon:"P"}},r=[];return r.push('<strong><a class="pdbIconsId" href="'+e.url+'" target="_blank">'+e.id+'</a></strong><span class="pdbIconsWrapper">'),e.icons.forEach(e=>{let i="";e.type;let n='<span class="pdbIconslogo" style="background-color:'+e.background+'" title="'+e.tooltipContent+'" ><i class="'+t[e.type].class+'" data-icon="'+t[e.type].dataIcon+'" style="color: #fff;"></i></span>';void 0!==e.url&&""!=e.url&&(n='<a class="pdbIconslogoA" href="'+e.url+'" target="_blank">'+n+"</a>"),r.push(n)}),e.resolution&&r.push('<strong style="color:#555">'+e.resolution+"&Aring;</strong></span>"),r.join(" ")}}resetSection(t){this.ctx.querySelector(".pvResetSection_"+t).style.display="none",this.ctx.hiddenSubtracks[t].forEach(e=>{this.ctx.querySelector(`.pvSubtrackRow_${t}_${e}`).style.display="table"}),delete this.ctx.hiddenSubtracks[t]}hideSection(t){let e=this.ctx.viewerData.tracks.length,r=[];t<e?r.push(".pvTracks_"+t,".pvSubtracks_"+t):t==e?r.push(".pvConsHistoRow",".pvConservationPlotRow"):r.push(".pvVariantGraphRow",".pvVariantPlotRow");for(let t of r){let e=this.ctx.querySelector(t);e&&(e.style.display="none")}this.ctx.hiddenSections.push(t)}showSection(t){let e=this.ctx.viewerData.tracks.length;if(t<e){let e=this.ctx.querySelector(".pvTracks_"+t);if(e.style.display="table",e.classList.contains("expanded")){let e=this.ctx.querySelector(".pvSubtracks_"+t);e.style.display="block",void 0!==this.ctx.hiddenSubtracks[t]&&this.ctx.hiddenSubtracks[t].length==e.children.length&&this.resetSection(t)}}else if(t==e){let t=this.ctx.querySelector(".pvConsHistoRow");if(t&&(t.style.display="table"),t.classList.contains("expanded")){let t=this.ctx.querySelector(".pvConservationPlotRow");t&&(t.style.display="block")}}else{let t=this.ctx.querySelector(".pvVariantGraphRow");if(t&&(t.style.display="table"),t.classList.contains("expanded")){let t=this.ctx.querySelector(".pvVariantPlotRow");t&&(t.style.display="block")}}this.ctx.hiddenSections.splice(this.ctx.hiddenSections.indexOf(t),1)}hideSubTrack(t,e){void 0===this.ctx.hiddenSubtracks[t]?this.ctx.hiddenSubtracks[t]=[e]:this.ctx.hiddenSubtracks[t].push(e),this.ctx.querySelector(`.pvSubtrackRow_${t}_${e}`).style.display="none",this.ctx.querySelector(".pvResetSection_"+t).style.display="inline-block",this.ctx.hiddenSubtracks[t].length==this.ctx.viewerData.tracks[t].data.length&&this.hideSection(t)}resetZoom(t){let e=null,r=null,i=this.ctx.querySelectorAll(".pvTrack")[0];if(i){if(void 0===t)e=i.getAttribute("displaystart"),r=i.getAttribute("displayend");else if(void 0!==t.trackData){if(t.trackData.start&&t.trackData.end)e=t.trackData.start,r=t.trackData.end;else if(t.trackData.locations&&t.trackData.locations.length>0){e=t.trackData.locations[0].fragments[0].start;let i=t.trackData.locations.length-1,n=t.trackData.locations[i].fragments.length-1;r=t.trackData.locations[i].fragments[n].end}}else e=t.start,r=t.end;t&&null==t.start&&null==t.end||(null==e&&(e="1"),null==r&&(r=this.ctx.viewerData.length)),void 0!==t&&void 0!==t.highlight&&t.highlight?i.dispatchEvent(new CustomEvent("change",{detail:{highlightstart:e,highlightend:r},bubbles:!0,cancelable:!0})):(i.dispatchEvent(new CustomEvent("change",{detail:{displaystart:e,displayend:r},bubbles:!0,cancelable:!0})),i.dispatchEvent(new CustomEvent("change",{detail:{highlightstart:null,highlightend:null},bubbles:!0,cancelable:!0})))}}zoomTrack(t,e){if(""!=this.ctx.zoomedTrack){this.ctx.querySelector(".pvZoomIcon_"+this.ctx.zoomedTrack).classList.remove("active")}if(this.ctx.zoomedTrack!=e){this.ctx.querySelector(".pvZoomIcon_"+e).classList.add("active"),this.ctx.zoomedTrack=e,this.resetZoom(t)}else this.ctx.zoomedTrack="",this.resetZoom({start:1,end:null})}resetView(){if(this.ctx.querySelector(".settingsMenu").style.display="none",this.ctx.querySelector(".rangeMenu").style.display="none",""!=this.ctx.zoomedTrack){this.ctx.querySelector(".pvZoomIcon_"+this.ctx.zoomedTrack).classList.remove("active")}this.ctx.zoomedTrack="",this.resetZoom({start:1,end:null}),this.ctx.querySelectorAll(".expanded").forEach(t=>{t.classList.remove("expanded");let e=t.querySelector(".pvTrack");e&&(e.style.display="block")});let t=this.ctx.querySelector(".pvTracks_0");t.style.display="table",t.classList.contains("expanded")||t.classList.add("expanded"),t.querySelector(".pvTrack").style.display="none",this.ctx.querySelectorAll(".protvistaRowGroup").forEach((t,e)=>{t.style.display="none",void 0!==this.ctx.hiddenSubtracks[e]&&this.resetSection(e)}),this.ctx.querySelector(".pvSubtracks_0").style.display="block",this.ctx.querySelector(".pvResetSection_0").style.display="none";let e=this.ctx.querySelector(".pvVariantPlotRow");e&&(e.style.display="none");let r=this.ctx.querySelector(".pvConservationPlotRow");if(r&&(r.style.display="none"),this.ctx.hiddenSections.length>0){let t=this.ctx.viewerData.tracks.length;this.ctx.hiddenSections.forEach(e=>{if(e>0&&e<t){let t=this.ctx.querySelector(".pvTracks_"+e);t.style.display="table",t.classList.contains("expanded")&&t.classList.remove("expanded"),t.querySelector(".pvTrack").style.display="block"}else if(e>=t)if(e==t){let t=this.ctx.querySelector(".pvConsHistoRow");t&&(t.style.display="table"),t.classList.contains("expanded")&&t.classList.remove("expanded");let e=this.ctx.querySelector(".pvConservationPlotRow");e&&(e.style.display="none")}else{let t=this.ctx.querySelector(".pvVariantGraphRow");t&&(t.style.display="table"),t.classList.contains("expanded")&&t.classList.remove("expanded");let e=this.ctx.querySelector(".pvVariantPlotRow");e&&(e.style.display="none")}})}this.ctx.hiddenSections=[],this.ctx.hiddenSubtracks=Object.assign({},{})}openRangeMenu(){this.ctx.querySelector(".settingsMenu").style.display="none";let t=this.ctx.querySelector(".rangeMenu");if("none"==t.style.display){let e=this.ctx.querySelector(".pvRangeMenuStart"),r=this.ctx.querySelector(".pvRangeMenuEnd");if(0==e.value||0==r.value){let t=1,i=this.ctx.viewerData.length,n=this.ctx.querySelectorAll(".pvTrack")[0];n&&(t=n.getAttribute("displaystart"),i=n.getAttribute("displayend")),e.value=Math.round(t),r.value=Math.round(i)}t.style.display="block"}else t.style.display="none"}openCategorySettingsMenu(){this.ctx.querySelector(".rangeMenu").style.display="none";let t=this.ctx.querySelector(".settingsMenu");"none"==t.style.display?(t.querySelectorAll(".pvSectionChkBox").forEach((t,e)=>{this.ctx.hiddenSections.indexOf(e)>-1?t.checked=!0:t.checked=!1}),t.style.display="block"):t.style.display="none"}pvRangeMenuSubmit(){let t=this.ctx.querySelector(".pvRangeMenuStart").value,e=this.ctx.querySelector(".pvRangeMenuEnd").value;if(""!=t&&""!=e&&(t=parseFloat(t),e=parseFloat(e),e>=t)){e>this.ctx.viewerData.length&&(e=this.ctx.viewerData.length);let r={start:Math.round(t),end:Math.round(e)};this.ctx.querySelector(".pvRangeMenuHighlight").checked&&(r.highlight=!0),this.resetZoom(r),this.openRangeMenu()}}pvCategorySettingsMenuSubmit(){this.ctx.querySelectorAll(".pvSectionChkBox").forEach((t,e)=>{t.checked?-1==this.ctx.hiddenSections.indexOf(e)&&this.hideSection(e):this.ctx.hiddenSections.indexOf(e)>-1&&this.showSection(e)}),this.openCategorySettingsMenu()}showLabelTooltip(t){let e=t.currentTarget.lastElementChild;if(!e||"labelTooltipContent"!=e.className)return;let r=e.innerText,i=this.ctx.querySelector(".labelTooltipBox");i.innerHTML=r;let n=t.currentTarget.getBoundingClientRect();i.style.left=n.x+n.width+5+"px",i.style.top=n.y+10+"px",i.style.display="block"}hideLabelTooltip(){this.ctx.querySelector(".labelTooltipBox").style.display="none"}showVariantPlot(){let t=this.ctx.querySelector(".pvVariantPlotRow");"none"==t.style.display?(t.style.display="block",t.previousElementSibling.classList.add("expanded")):(t.style.display="none",t.previousElementSibling.classList.remove("expanded"))}showConservationPlot(){let t=this.ctx.querySelector(".pvConservationPlotRow");"none"==t.style.display?(t.style.display="block",t.previousElementSibling.classList.add("expanded")):(t.style.display="none",t.previousElementSibling.classList.remove("expanded"))}filterSc(t){this.ctx.querySelector(".sc_radio").dispatchEvent(new CustomEvent("sc-change",{detail:{type:t},bubbles:!0,cancelable:!0}))}addEventSubscription(){document.addEventListener("PDB.topologyViewer.click",t=>{this.handleExtEvents(t)}),document.addEventListener("PDB.topologyViewer.mouseover",t=>{this.handleExtEvents(t)}),document.addEventListener("PDB.topologyViewer.mouseout",t=>{this.handleExtEvents(t)}),document.addEventListener("PDB.litemol.click",t=>{this.handleExtEvents(t)}),document.addEventListener("PDB.litemol.mouseover",t=>{this.handleExtEvents(t)}),document.addEventListener("PDB.molstar.click",t=>{this.handleExtEvents(t)}),document.addEventListener("PDB.molstar.mouseover",t=>{this.handleExtEvents(t)})}removeEventSubscription(){this.ctx.subscribeEvents&&(document.removeEventListener("PDB.topologyViewer.click"),document.removeEventListener("PDB.topologyViewer.mouseover"),document.removeEventListener("PDB.topologyViewer.mouseout"),document.removeEventListener("PDB.litemol.click"),document.removeEventListener("PDB.litemol.mouseover"),document.removeEventListener("PDB.molstar.click"),document.removeEventListener("PDB.molstar.mouseover"))}};class as extends HTMLElement{constructor(){super(),this.viewerData={displayNavigation:!0,displaySequence:!0,displayLabels:!0,displayConservation:!0,displayVariants:!0,sequence:void 0,length:void 0,tracks:[],legends:{alignment:"right",data:{}}},this.layoutHelper=new ss(this)}set viewerdata(t){t&&(this.displayLoadingMessage(),this.viewerData=t,this.viewerData.displayNavigation=void 0===t.displayNavigation||t.displayNavigation,this.viewerData.displaySequence=void 0===t.displaySequence||t.displaySequence,this.viewerData.displayLabels=void 0===t.displayLabels||t.displayLabels,this._render())}async connectedCallback(){this._accession=this.getAttribute("accession"),this._entityId=this.getAttribute("entity-id"),this._entryId=this.getAttribute("entry-id"),this.customData=this.getAttribute("custom-data"),this.pageSection=this.getAttribute("page-section");let t=this.getAttribute("env");this.subscribeEvents="false"!==this.getAttribute("subscribe-events"),this.showLegends="false"!==this.getAttribute("legends"),this.hiddenSubtracks={},this.hiddenSections=[],this.scrollbarWidth=0,this.formattedSubTracks=[],this.zoomedTrack="",this.variantFilterAttr=JSON.stringify($n),this.displayLoadingMessage(),void 0!==this.customData&&null!==this.customData||(this.dataHelper=new ns(t,this._accession,this._entryId,this._entityId,this.pageSection),this.viewerData=await this.dataHelper.processMutlplePDBeApiData(),this.viewerData.displayConservation=!this.pageSection||"2"!=this.pageSection,this.viewerData.displayVariants=!this.pageSection||"2"!=this.pageSection,this._render())}_render(){if(!this.viewerData.length||0==this.viewerData.tracks.length)return void this.displayErrorMessage();this.showLegends||delete this.viewerData.legends;Object(v.render)((()=>v.html`
        <div class="protvista-pdb">
            <span class="labelTooltipBox" style="display:none"></span>
            <protvista-manager attributes="length displaystart displayend highlightstart highlightend activefilters filters">
                
                <!-- Navigation section -->
                ${this.viewerData.displayNavigation?v.html`${Wn(this)}`:""}
                
                <!-- Sequence section -->
                ${this.viewerData.displaySequence?v.html`${Zn(this)}`:""}
                
                <!-- Tracks section -->
                ${Yn(this)}
                
                <!-- Sequence conservation section -->
                ${this.viewerData.displayConservation?v.html`${Kn(this)}`:""}
                
                <!-- Variations section -->
                ${this.viewerData.displayVariants?v.html`${es(this)}`:""}
                
                <!-- Legends section -->
                ${this.viewerData.legends?v.html`${is(this)}`:""}

            </protvista-manager>
        </div>

        <!-- div to measure scrollbar width for padding -->
        <div class="divWithScroll">
            <div style="height: 60px;width:80%"></div>
        </div>
        <div class="divWithoutScroll">&nbsp;</div>`)(),this),this.layoutHelper.postProcessLayout()}displayLoadingMessage(){Object(v.render)(v.html`<div class="protvista-pdb" style="text-align:center;">Loading Protvista...</div>`,this)}displayErrorMessage(){Object(v.render)(v.html`<div class="protvista-pdb" style="text-align:center;">Invalid data!</div>`,this)}disconnectedCallback(){this.layoutHelper.removeEventSubscription()}}var os=as;const ls=function(t,e){customElements.get(t)||customElements.define(t,e)},cs=function(){ls("protvista-manager",s),ls("protvista-sequence",f),ls("protvista-filter",Tr),ls("protvista-pdb-navigation",Rr),ls("protvista-pdb-track",mi),ls("protvista-pdb-sc-histogram",_i),ls("protvista-pdb-seq-consevation",xi),ls("protvista-pdb-variation-graph",wi),ls("protvista-pdb-variation",Rn),ls("protvista-tooltip",Hn),ls("protvista-pdb",os)};window.customElements?cs():document.addEventListener("WebComponentsReady",(function(){cs()}))}]);